import{u as d,l as c,C as e,q as r,i as o,_hW as p}from"./q-GWx3MS6J.js";import{_ as u}from"./q-DoNi8vyY.js";const g=n=>{const[t]=d();return t.value=n.target.value},f=Object.freeze(Object.defineProperty({__proto__:null,s_aKnM9y5f0QY:g},Symbol.toStringTag,{value:"Module"})),y=n=>{const[t]=d();return t.value=n.target.value},x=Object.freeze(Object.defineProperty({__proto__:null,s_An9yLH74YkI:y},Symbol.toStringTag,{value:"Module"})),h=async()=>{const[n,t,i,a,s]=d();t.value=!0,a.value=null;try{const _=await(await fetch("/api/email/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:n.value,subject:s.value,message:i.value})})).json();a.value=_}catch{a.value={success:!1,error:"Errore di connessione"}}finally{t.value=!1}},T=Object.freeze(Object.defineProperty({__proto__:null,_hW:p,s_p4wzYWRgjEY:h},Symbol.toStringTag,{value:"Module"})),S=async()=>{const[n,t,i]=d();t.value=!0,i.value=null;try{const s=await(await fetch("/api/email/reminder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:n.value,title:"Reminder di Test",message:"Questo è un reminder di test per verificare le notifiche",actionUrl:"http://localhost:5173/gestione",actionLabel:"Vai al Pannello Admin"})})).json();i.value=s}catch{i.value={success:!1,error:"Errore di connessione"}}finally{t.value=!1}},E=Object.freeze(Object.defineProperty({__proto__:null,_hW:p,s_VmTxZV085EY:S},Symbol.toStringTag,{value:"Module"})),w=()=>{const n=c(""),t=c("Test Email - JudoOK"),i=c("Questa è un'email di test inviata tramite SMTP"),a=c(!1),s=c(null),m=r(()=>u(()=>Promise.resolve().then(()=>T),void 0),"s_p4wzYWRgjEY",[n,a,i,s,t]),_=r(()=>u(()=>Promise.resolve().then(()=>I),void 0),"s_ZiejcfaeE98",[a,s]),b=r(()=>u(()=>Promise.resolve().then(()=>E),void 0),"s_VmTxZV085EY",[n,a,s]);return e("div",null,{class:"min-h-screen bg-gray-50 py-8 px-4"},e("div",null,{class:"max-w-4xl mx-auto"},[e("div",null,{class:"bg-white rounded-lg shadow-md p-6"},[e("h1",null,{class:"text-3xl font-bold text-gray-900 mb-6"},"Test Integrazione Email (SMTP)",3,null),e("div",null,{class:"space-y-6"},[e("div",null,{class:"border-b pb-6"},[e("h2",null,{class:"text-xl font-semibold text-gray-900 mb-4"},"Configurazione",3,null),e("div",null,{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[e("p",null,{class:"text-sm text-blue-900 mb-2"},e("strong",null,null,"Variabili d'ambiente richieste (.env):",3,null),3,null),e("ul",null,{class:"text-sm text-blue-800 space-y-1 ml-4"},[e("li",null,null,"• SMTP_HOST - Server SMTP (es. smtp.gmail.com)",3,null),e("li",null,null,"• SMTP_PORT - Porta SMTP (es. 465)",3,null),e("li",null,null,"• SMTP_USER - Email utente",3,null),e("li",null,null,"• SMTP_PASS - Password (app password per Gmail)",3,null),e("li",null,null,"• ADMIN_EMAIL - Email admin per le notifiche",3,null)],3,null)],3,null)],3,null),e("div",null,{class:"border-b pb-6"},[e("h2",null,{class:"text-xl font-semibold text-gray-900 mb-4"},"1. Test Email Generica",3,null),e("div",null,{class:"space-y-4"},[e("div",null,null,[e("label",null,{class:"block text-sm font-medium text-gray-700 mb-2"},"Email destinatario",3,null),e("input",null,{type:"email",value:o(l=>l.value,[n]),placeholder:"tua-email@esempio.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput$:r(()=>u(()=>Promise.resolve().then(()=>f),void 0),"s_aKnM9y5f0QY",[n])},null,3,null)],3,null),e("div",null,null,[e("label",null,{class:"block text-sm font-medium text-gray-700 mb-2"},"Oggetto",3,null),e("input",null,{type:"text",value:o(l=>l.value,[t]),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput$:r(()=>u(()=>Promise.resolve().then(()=>j),void 0),"s_wVfhpL1aAdg",[t])},null,3,null)],3,null),e("div",null,null,[e("label",null,{class:"block text-sm font-medium text-gray-700 mb-2"},"Messaggio",3,null),e("textarea",null,{value:o(l=>l.value,[i]),rows:3,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput$:r(()=>u(()=>Promise.resolve().then(()=>x),void 0),"s_An9yLH74YkI",[i])},null,3,null)],3,null),e("button",null,{disabled:o((l,v)=>v.value||!l.value,[n,a]),class:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-2 px-4 rounded-lg transition-colors",onClick$:m},o(l=>l.value?"Invio in corso...":"Invia Email di Test",[a]),3,null)],3,null)],3,null),e("div",null,{class:"border-b pb-6"},[e("h2",null,{class:"text-xl font-semibold text-gray-900 mb-4"},"2. Test Notifica Nuova Task",3,null),e("p",null,{class:"text-sm text-gray-600 mb-4"},"Invia una notifica all'email admin configurata in ADMIN_EMAIL",3,null),e("button",null,{disabled:o(l=>l.value,[a]),class:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-medium py-2 px-4 rounded-lg transition-colors",onClick$:_},o(l=>l.value?"Invio in corso...":"Invia Notifica Task",[a]),3,null)],3,null),e("div",null,{class:"pb-6"},[e("h2",null,{class:"text-xl font-semibold text-gray-900 mb-4"},"3. Test Reminder",3,null),e("p",null,{class:"text-sm text-gray-600 mb-4"},"Invia un reminder all'email specificata sopra",3,null),e("button",null,{disabled:o((l,v)=>v.value||!l.value,[n,a]),class:"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white font-medium py-2 px-4 rounded-lg transition-colors",onClick$:b},o(l=>l.value?"Invio in corso...":"Invia Reminder",[a]),3,null)],3,null),s.value&&e("div",null,{class:o(l=>`p-4 rounded-lg ${l.value.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,[s])},[e("h3",null,{class:o(l=>`font-semibold mb-2 ${l.value.success?"text-green-900":"text-red-900"}`,[s])},o(l=>l.value.success?"✓ Successo!":"✗ Errore",[s]),3,null),e("pre",null,{class:o(l=>`text-sm overflow-auto ${l.value.success?"text-green-800":"text-red-800"}`,[s])},JSON.stringify(s.value,null,2),1,null)],1,"VK_0")],1,null)],1,null),e("div",null,{class:"mt-8 bg-white rounded-lg shadow-md p-6"},[e("h2",null,{class:"text-2xl font-bold text-gray-900 mb-4"},"Come Usare nelle tue Routes/Componenti",3,null),e("div",null,{class:"space-y-4 text-sm"},[e("div",null,null,[e("h3",null,{class:"font-semibold text-gray-900 mb-2"},"Esempio 1: Inviare email generica",3,null),e("pre",null,{class:"bg-gray-50 p-4 rounded-lg overflow-auto"},`import { sendEmail } from '~/utils/email';

// In una route o action
const result = await sendEmail({
  to: 'utente@esempio.com',
  subject: 'Benvenuto!',
  html: '<h1>Benvenuto in JudoOK!</h1>',
  text: 'Benvenuto in JudoOK!'
});`,3,null)],3,null),e("div",null,null,[e("h3",null,{class:"font-semibold text-gray-900 mb-2"},"Esempio 2: Notifica task (dal form admin)",3,null),e("pre",null,{class:"bg-gray-50 p-4 rounded-lg overflow-auto"},`import { sendAdminTaskNotification } from '~/utils/email';

// Dopo aver creato una task
await sendAdminTaskNotification({
  title: taskData.titolo,
  description: taskData.descrizione,
  priority: taskData.priorita,
  createdBy: 'Admin'
});`,3,null)],3,null),e("div",null,null,[e("h3",null,{class:"font-semibold text-gray-900 mb-2"},"Esempio 3: Inviare reminder",3,null),e("pre",null,{class:"bg-gray-50 p-4 rounded-lg overflow-auto"},`import { sendReminderEmail } from '~/utils/email';

await sendReminderEmail({
  to: 'admin@esempio.com',
  title: 'Scadenza imminente',
  message: 'La task deve essere completata entro domani',
  actionUrl: 'https://judook.com/gestione',
  actionLabel: 'Vedi Task'
});`,3,null)],3,null)],3,null)],3,null)],1,null),1,"VK_1")},M=Object.freeze(Object.defineProperty({__proto__:null,s_0ke81mlctEs:w},Symbol.toStringTag,{value:"Module"})),P=n=>{const[t]=d();return t.value=n.target.value},j=Object.freeze(Object.defineProperty({__proto__:null,s_wVfhpL1aAdg:P},Symbol.toStringTag,{value:"Module"})),O=async()=>{const[n,t]=d();n.value=!0,t.value=null;try{const a=await(await fetch("/api/email/task-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"Task di Test",description:"Questa è una task di test per verificare le notifiche email",priority:"Alta",createdBy:"Admin Test"})})).json();t.value=a}catch{t.value={success:!1,error:"Errore di connessione"}}finally{n.value=!1}},I=Object.freeze(Object.defineProperty({__proto__:null,_hW:p,s_ZiejcfaeE98:O},Symbol.toStringTag,{value:"Module"}));export{p as _hW,M as i,w as s_0ke81mlctEs,y as s_An9yLH74YkI,S as s_VmTxZV085EY,O as s_ZiejcfaeE98,g as s_aKnM9y5f0QY,h as s_p4wzYWRgjEY,P as s_wVfhpL1aAdg};
