import{u as f,b as v,q as a,B as I,l as O,p as P,C as l,k as s,j as e,i as _,_hW as x}from"./q-GWx3MS6J.js";import{p as h}from"./q-CpnnSTOF.js";import{_ as i}from"./q-DoNi8vyY.js";const j=async()=>{const[t,u]=f();u.value=!0;try{const[n,r,b,m]=await Promise.allSettled([h.collection("tecniche").getFullList({requestKey:null}),h.collection("dizionario").getList(1,1,{requestKey:null}),h.collection("galleria").getList(1,1,{requestKey:null}),h.collection("bacheca").getList(1,1,{requestKey:null})]),o=n.status==="fulfilled"?n.value:[],E=r.status==="fulfilled"?r.value:{totalItems:0},T=b.status==="fulfilled"?b.value:{totalItems:0},L=m.status==="fulfilled"?m.value:{totalItems:0},y={};o.forEach(d=>{const c=(d.tags||"Altro").split(",")[0].trim();y[c]=(y[c]||0)+1});const k=Object.entries(y).map(([d,c])=>({name:d,count:c}));t.value={techniques:o.length,dictionary:E.totalItems,gallery:T.totalItems,posts:L.totalItems,categories:k.sort((d,c)=>c.count-d.count)}}catch(n){console.error("[Dashboard] Error fetching stats:",n)}finally{u.value=!1}},A=Object.freeze(Object.defineProperty({__proto__:null,_hW:x,s_LmTZO0E8YpE:j},Symbol.toStringTag,{value:"Module"})),S=()=>{const[t]=f();t()},K=Object.freeze(Object.defineProperty({__proto__:null,_hW:x,s_sm0uKnYcFps:S},Symbol.toStringTag,{value:"Module"})),M=v(a(()=>i(()=>Promise.resolve().then(()=>D),void 0),"s_0IZLMAaLBqY")),g=v(a(()=>i(()=>import("./q-ctTLYkYR.js"),[]),"s_3Q9ttjPx1U4")),p=v(a(()=>i(()=>import("./q-CMOf8ZRu.js"),[]),"s_0a0nZ9Qixq8")),w={title:"Dashboard - JudoOK Gestione",meta:[{name:"description",content:"Dashboard amministrativa JudoOK"}]},J=Object.freeze(Object.defineProperty({__proto__:null,_auto_ActionButton:p,_auto_StatCard:g,default:M,head:w},Symbol.toStringTag,{value:"Module"})),G=v(a(()=>i(()=>import("./q-CpnnSTOF.js").then(t=>t.b),[]),"s_4POcaaixRjI")),R=v(a(()=>i(()=>import("./q-C42LC8SV.js").then(t=>t.t),[]),"s_cXC4g5a6spI")),C=()=>{I();const t=O({techniques:0,dictionary:0,gallery:0,posts:0,categories:[]}),u=O(!0),n=O(!1),r=a(()=>i(()=>Promise.resolve().then(()=>A),void 0),"s_LmTZO0E8YpE",[t,u]);P(a(()=>i(()=>Promise.resolve().then(()=>K),void 0),"s_sm0uKnYcFps",[r]));const b=a(()=>i(()=>Promise.resolve().then(()=>z),void 0),"s_JzLWdWOC0OE",[n]),m=a(()=>i(()=>Promise.resolve().then(()=>B),void 0),"s_HIs30gdvGfI",[n]);return l("div",null,{class:"space-y-10 animate-in fade-in duration-700"},[l("header",null,null,[l("h2",null,{class:"text-4xl font-black text-gray-900 dark:text-white tracking-tight"},["Benvenuto, ",l("span",null,{class:"text-red-600"},"Sensei",3,null)],3,null),l("p",null,{class:"mt-2 text-gray-500 dark:text-gray-400 font-medium"},"Ecco cosa sta succedendo nel Dojo oggi.",3,null)],3,null),u.value?l("div",null,{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},[1,2,3,4].map(o=>l("div",null,{class:"h-32 bg-white dark:bg-gray-900 rounded-3xl animate-pulse"},null,3,o)),1,"KG_0"):l("div",null,{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},[s(g,{label:"Tecniche",get value(){return t.value.techniques},icon:"ðŸ¥‹",color:"red",[e]:{label:e,value:_(o=>o.value.techniques,[t]),icon:e,color:e}},3,"KG_1"),s(g,{label:"Termini",get value(){return t.value.dictionary},icon:"ðŸ“š",color:"blue",[e]:{label:e,value:_(o=>o.value.dictionary,[t]),icon:e,color:e}},3,"KG_2"),s(g,{label:"Media",get value(){return t.value.gallery},icon:"ðŸ–¼ï¸",color:"green",[e]:{label:e,value:_(o=>o.value.gallery,[t]),icon:e,color:e}},3,"KG_3"),s(g,{label:"News",get value(){return t.value.posts},icon:"ðŸ“°",color:"yellow",[e]:{label:e,value:_(o=>o.value.posts,[t]),icon:e,color:e}},3,"KG_4")],1,null),l("div",null,{class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},[l("div",null,{class:"lg:col-span-2 bg-white dark:bg-gray-900 rounded-3xl border border-gray-100 dark:border-gray-800 p-8 shadow-sm"},[l("div",null,{class:"flex items-center justify-between mb-8"},[l("div",null,{class:"flex items-center gap-3"},[l("div",null,{class:"w-10 h-10 rounded-xl bg-red-50 dark:bg-red-900/20 flex items-center justify-center"},l("span",null,{class:"text-xl"},"âœ“",3,null),3,null),l("div",null,null,[l("h3",null,{class:"text-xl font-black text-gray-900 dark:text-white tracking-tight"},"Task Amministrativi",3,null),l("p",null,{class:"text-xs text-gray-400 font-medium"},"Gestisci le attivitÃ  del Dojo",3,null)],3,null)],3,null),l("div",null,{class:"flex gap-2"},[l("button",null,{class:"px-3 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-xl text-xs font-bold hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:"Ricarica task",onClick$:r},"ðŸ”„",3,null),l("button",null,{class:"px-4 py-2 bg-red-600 text-white rounded-xl text-xs font-bold hover:bg-red-700 transition-colors",onClick$:b},"âž• Nuovo Task",3,null)],3,null)],3,null),s(G,{onRefresh:r,[e]:{onRefresh:e}},3,"KG_5")],1,null),l("div",null,{class:"bg-gray-900 rounded-3xl p-8 text-white shadow-xl shadow-gray-950/20"},[l("h3",null,{class:"text-xl font-black mb-8 tracking-tight"},"Azioni Rapide",3,null),l("div",null,{class:"grid grid-cols-1 gap-4"},[s(p,{label:"Aggiungi Tecnica",icon:"ðŸ¥‹",href:"/gestione/tecniche/new",primary:!0,[e]:{label:e,icon:e,href:e,primary:e}},3,"KG_6"),s(p,{label:"Nuovo Termine",icon:"ðŸ“š",href:"/gestione/dizionario/new",[e]:{label:e,icon:e,href:e}},3,"KG_7"),s(p,{label:"Aggiungi Galleria",icon:"ðŸ–¼ï¸",href:"/gestione/gallery/new",[e]:{label:e,icon:e,href:e}},3,"KG_8"),s(p,{label:"Nuovo Post",icon:"âœï¸",href:"/gestione/bacheca/new",[e]:{label:e,icon:e,href:e}},3,"KG_9")],1,null)],1,null)],1,null),s(R,{get isOpen(){return n.value},onClose:m,onTaskCreated:r,[e]:{isOpen:_(o=>o.value,[n]),onClose:e,onTaskCreated:e}},3,"KG_10")],1,"KG_11")},D=Object.freeze(Object.defineProperty({__proto__:null,s_0IZLMAaLBqY:C},Symbol.toStringTag,{value:"Module"})),q=()=>{const[t]=f();t.value=!0},z=Object.freeze(Object.defineProperty({__proto__:null,_hW:x,s_JzLWdWOC0OE:q},Symbol.toStringTag,{value:"Module"})),V=()=>{const[t]=f();t.value=!1},B=Object.freeze(Object.defineProperty({__proto__:null,_hW:x,s_HIs30gdvGfI:V},Symbol.toStringTag,{value:"Module"}));export{x as _hW,J as i,C as s_0IZLMAaLBqY,V as s_HIs30gdvGfI,q as s_JzLWdWOC0OE,j as s_LmTZO0E8YpE,S as s_sm0uKnYcFps};
