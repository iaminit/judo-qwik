import{u as s,l as _,p as k,q as r,C as e,k as w,i as g,j as v,G as x,_hW as u}from"./q-GWx3MS6J.js";import{p as m}from"./q-CpnnSTOF.js";import{_ as i}from"./q-DoNi8vyY.js";import{L as O}from"./q-DZEaxapN.js";const P=()=>{const[t,l]=s();return t(l.id)},D=Object.freeze(Object.defineProperty({__proto__:null,s_0AkIUrFDcg4:P},Symbol.toStringTag,{value:"Module"})),S=async t=>{const[l,o]=s();if(confirm("Sei sicuro di voler eliminare questa sezione del programma?"))try{await m.collection("fijlkam").delete(t),l.value=l.value.filter(a=>a.id!==t),o.value=o.value.filter(a=>a!==t)}catch{alert("Errore durante l'eliminazione")}},T=Object.freeze(Object.defineProperty({__proto__:null,_hW:u,s_COV0v7F1hRU:S},Symbol.toStringTag,{value:"Module"})),j=()=>{const t=_(null),l=_([]),o=_(!0),a=_([]),d=_(!1);k(r(()=>i(()=>Promise.resolve().then(()=>U),void 0),"s_xOu60dv7EOc",[t,r(()=>i(()=>Promise.resolve().then(()=>L),void 0),"s_XxMMYexo2VM",[t,o,l])]));const b=r(()=>i(()=>Promise.resolve().then(()=>T),void 0),"s_COV0v7F1hRU",[l,a]),y=r(()=>i(()=>Promise.resolve().then(()=>C),void 0),"s_yiP0NcuZf3Q",[d,l,a]),f=r(()=>i(()=>Promise.resolve().then(()=>M),void 0),"s_TbQWFe7NXyo",[a]),h=r(()=>i(()=>Promise.resolve().then(()=>R),void 0),"s_raselfWNgtI",[l,a]);return e("div",null,{class:"space-y-10 animate-in fade-in duration-700"},[e("header",null,{class:"flex flex-col md:flex-row md:items-center justify-between gap-6"},[e("div",null,null,[e("h2",null,{class:"text-3xl font-black text-gray-900 dark:text-white tracking-tight"},"Gestione Programmi",3,null),e("p",null,{class:"text-gray-500 dark:text-gray-400 font-medium mt-1"},"Gestisci i requisiti per gli esami DAN.",3,null)],3,null),e("div",null,{class:"flex items-center gap-3"},[a.value.length>0&&e("button",null,{disabled:g(n=>n.value,[d]),class:"bg-red-50 text-red-600 px-6 py-3 rounded-xl font-bold border border-red-100 dark:bg-red-950/20 dark:border-red-900 shadow-sm animate-in slide-in-from-right-4 duration-300",onClick$:y},g((n,p)=>n.value?"Eliminazione...":`Elimina ${p.value.length} selezionati`,[d,a]),3,"qD_0"),w(O,{href:"/gestione/programma/new",class:"inline-flex items-center gap-2 px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-black rounded-2xl transition-all shadow-lg shadow-red-500/25 transform hover:-translate-y-1",children:[e("span",null,{class:"text-xl"},"âž•",3,null),"Nuova Sezione"],[v]:{href:v,class:v}},3,"qD_1")],1,null)],1,null),e("div",null,{class:"bg-white dark:bg-gray-900 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden"},[e("div",null,{class:"p-6 border-b border-gray-100 dark:border-gray-800 flex flex-wrap gap-3"},[e("button",{class:`px-4 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${t.value===null?"bg-indigo-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-400"}`},{onClick$:r(()=>i(()=>Promise.resolve().then(()=>X),void 0),"s_MMnsi8BH4tc",[t])},"Tutti",3,null),[1,2,3,4,5,6].map(n=>e("button",{class:`px-4 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${t.value===n?"bg-indigo-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-400"}`,onClick$:r(()=>i(()=>Promise.resolve().then(()=>F),void 0),"s_QxLxI1QDyXc",[t,n])},null,[n,"Â° Dan"],0,n))],1,null),e("div",null,{class:"overflow-x-auto"},o.value?e("div",null,{class:"p-20 flex justify-center"},e("div",null,{class:"animate-spin h-8 w-8 border-4 border-indigo-600 border-t-transparent rounded-full"},null,3,null),3,"qD_2"):e("table",null,{class:"w-full text-left border-collapse"},[e("thead",null,null,e("tr",null,{class:"bg-gray-50 dark:bg-gray-800/50"},[e("th",null,{class:"px-6 py-4 w-10 text-center"},e("input",null,{type:"checkbox",checked:g((n,p)=>n.value.length>0&&p.value.length===n.value.length,[l,a]),class:"w-5 h-5 rounded-lg accent-indigo-600 cursor-pointer",onClick$:h},null,3,null),3,null),e("th",null,{class:"px-6 py-4 text-xs font-black text-gray-400 uppercase tracking-widest"},"Dan",3,null),e("th",null,{class:"px-6 py-4 text-xs font-black text-gray-400 uppercase tracking-widest"},"Sezione",3,null),e("th",null,{class:"px-6 py-4 text-xs font-black text-gray-400 uppercase tracking-widest"},"Titolo",3,null),e("th",null,{class:"px-6 py-4 text-xs font-black text-gray-400 uppercase tracking-widest"},"Ordine",3,null),e("th",null,{class:"px-6 py-4 text-xs font-black text-gray-400 uppercase tracking-widest text-right"},"Azioni",3,null)],3,null),3,null),e("tbody",null,{class:"divide-y divide-gray-50 dark:divide-gray-800"},l.value.length===0?e("tr",null,null,e("td",null,{colSpan:6,class:"px-6 py-20 text-center text-gray-500 dark:text-gray-400 font-bold"},"Nessun programma trovato.",3,null),3,"qD_3"):l.value.map(n=>e("tr",{class:`group hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors ${a.value.includes(n.id)?"bg-indigo-50/20 dark:bg-indigo-900/10":""}`},null,[e("td",null,{class:"px-6 py-4 text-center"},e("input",{checked:a.value.includes(n.id),onClick$:r(()=>i(()=>Promise.resolve().then(()=>A),void 0),"s_yICFTXkUom8",[n,f])},{type:"checkbox",class:"w-5 h-5 rounded-lg accent-indigo-600 cursor-pointer"},null,2,null),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap"},e("span",null,{class:"font-black text-indigo-600 dark:text-indigo-400"},[x(n,"livello"),"Â° DAN"],1,null),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap"},e("span",null,{class:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 rounded-full text-[10px] font-black uppercase tracking-widest"},n.categoria_secondaria||"-",1,null),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap font-bold text-gray-900 dark:text-white"},x(n,"titolo"),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap font-medium text-gray-400"},["#",x(n,"ordine")],1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-right"},e("div",null,{class:"flex justify-end gap-2 opacity-20 group-hover:opacity-100 transition-opacity"},[e("a",{href:`/gestione/programma/${n.id}`},{class:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/10 rounded-lg transition-colors",title:"Modifica"},"âœï¸",3,null),e("button",{onClick$:r(()=>i(()=>Promise.resolve().then(()=>D),void 0),"s_0AkIUrFDcg4",[b,n])},{class:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-lg transition-colors",title:"Elimina"},"ðŸ—‘ï¸",2,null)],1,null),1,null)],1,n.id)),1,null)],1,null),1,null),e("div",null,{class:"p-6 bg-gray-50 dark:bg-gray-800/30 border-t border-gray-100 dark:border-gray-800 text-[10px] font-black text-gray-400 uppercase tracking-widest"},[g(n=>n.value.length,[l])," sezioni â€¢ ",g(n=>n.value.length,[a])," selezionate"],3,null)],1,null)],1,"qD_4")},Y=Object.freeze(Object.defineProperty({__proto__:null,s_jwaVn3QTgBk:j},Symbol.toStringTag,{value:"Module"})),E=t=>{const[l]=s();l.value.includes(t)?l.value=l.value.filter(o=>o!==t):l.value=[...l.value,t]},M=Object.freeze(Object.defineProperty({__proto__:null,_hW:u,s_TbQWFe7NXyo:E},Symbol.toStringTag,{value:"Module"})),I=async()=>{const[t,l,o]=s();l.value=!0;try{const a=t.value?`livello = ${t.value} && tags ~ "esame_dan"`:'tags ~ "esame_dan"',d=await m.collection("fijlkam").getFullList({sort:"livello,ordine",filter:a,requestKey:null});o.value=d.map(c=>({id:c.id,titolo:c.titolo,livello:c.livello,categoria_secondaria:c.categoria_secondaria,ordine:c.ordine}))}catch(a){console.error("[Admin Program] Error:",a),o.value=[]}finally{l.value=!1}},L=Object.freeze(Object.defineProperty({__proto__:null,_hW:u,s_XxMMYexo2VM:I},Symbol.toStringTag,{value:"Module"})),z=()=>{const[t,l]=s();return l(t.id)},A=Object.freeze(Object.defineProperty({__proto__:null,s_yICFTXkUom8:z},Symbol.toStringTag,{value:"Module"})),V=async()=>{const[t,l,o]=s();if(confirm(`Sei sicuro di voler eliminare ${o.value.length} sezioni del programma selezionate?`)){t.value=!0;try{for(const a of o.value)await m.collection("fijlkam").delete(a);l.value=l.value.filter(a=>!o.value.includes(a.id)),o.value=[]}catch(a){alert("Errore durante l'eliminazione di massa: "+a.message)}finally{t.value=!1}}},C=Object.freeze(Object.defineProperty({__proto__:null,_hW:u,s_yiP0NcuZf3Q:V},Symbol.toStringTag,{value:"Module"})),Q=()=>{const[t,l]=s();return t.value=l},F=Object.freeze(Object.defineProperty({__proto__:null,s_QxLxI1QDyXc:Q},Symbol.toStringTag,{value:"Module"})),N=()=>{const[t,l]=s();l.value.length===t.value.length&&t.value.length>0?l.value=[]:l.value=t.value.map(o=>o.id)},R=Object.freeze(Object.defineProperty({__proto__:null,_hW:u,s_raselfWNgtI:N},Symbol.toStringTag,{value:"Module"})),$=()=>{const[t]=s();return t.value=null},X=Object.freeze(Object.defineProperty({__proto__:null,s_MMnsi8BH4tc:$},Symbol.toStringTag,{value:"Module"})),q=({track:t})=>{const[l,o]=s();t(()=>l.value),o()},U=Object.freeze(Object.defineProperty({__proto__:null,_hW:u,s_xOu60dv7EOc:q},Symbol.toStringTag,{value:"Module"}));export{u as _hW,Y as i,P as s_0AkIUrFDcg4,S as s_COV0v7F1hRU,$ as s_MMnsi8BH4tc,Q as s_QxLxI1QDyXc,E as s_TbQWFe7NXyo,I as s_XxMMYexo2VM,j as s_jwaVn3QTgBk,N as s_raselfWNgtI,q as s_xOu60dv7EOc,z as s_yICFTXkUom8,V as s_yiP0NcuZf3Q};
