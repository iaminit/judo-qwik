import{u,l as _,p as h,q as i,C as e,i as p,G as v,_hW as c}from"./q-GWx3MS6J.js";import{p as x}from"./q-CpnnSTOF.js";import{_ as s}from"./q-DoNi8vyY.js";const k=async(t,l)=>{const[r,n]=u();if(confirm(`Sei sicuro di voler eliminare il termine "${l}"?`))try{await x.collection("dizionario").delete(t),r.value=r.value.filter(a=>a.id!==t),n.value=n.value.filter(a=>a!==t)}catch(a){alert("Errore: "+a.message)}},w=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_0XVL0mw9yAk:k},Symbol.toStringTag,{value:"Module"})),z=async()=>{const[t,l,r]=u();l.value=!0;try{const n=r.value?`titolo ~ "${r.value}" || titolo_secondario ~ "${r.value}"`:"",a=await x.collection("dizionario").getFullList({sort:"titolo",filter:n,requestKey:null});t.value=a.map(d=>({id:d.id,term:d.titolo,kanji:d.titolo_secondario,description:d.contenuto,pronunciation:d.categoria_secondaria,audio:d.audio,collectionId:d.collectionId}))}catch(n){console.error("Error fetching dictionary:",n),t.value=[]}finally{l.value=!1}},S=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_N0Y8F8R0TxQ:z},Symbol.toStringTag,{value:"Module"})),T=()=>{const t=_(""),l=_([]),r=_(!0),n=_([]),a=_(!1);h(i(()=>s(()=>Promise.resolve().then(()=>A),void 0),"s_ijEZ6p5Xhd8",[i(()=>s(()=>Promise.resolve().then(()=>S),void 0),"s_N0Y8F8R0TxQ",[l,r,t]),t,n]));const m=i(()=>s(()=>Promise.resolve().then(()=>w),void 0),"s_0XVL0mw9yAk",[l,n]),y=i(()=>s(()=>Promise.resolve().then(()=>j),void 0),"s_muWTzkVkwLo",[l,a,n]),b=i(()=>s(()=>Promise.resolve().then(()=>I),void 0),"s_Nk1PH3k62N0",[n]),f=i(()=>s(()=>Promise.resolve().then(()=>V),void 0),"s_ZSWXfOC0ie0",[l,n]);return e("div",null,{class:"space-y-8 animate-in fade-in duration-700"},[e("div",null,{class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},[e("div",null,null,[e("h2",null,{class:"text-3xl font-black text-gray-900 dark:text-white tracking-tight"},"Dizionario Giapponese",3,null),e("p",null,{class:"text-gray-500 dark:text-gray-400 font-medium mt-1"},"Gestisci i termini, i kanji e le pronunce audio.",3,null)],3,null),e("div",null,{class:"flex items-center gap-3"},[n.value.length>0&&e("button",null,{disabled:p(o=>o.value,[a]),class:"bg-red-50 text-red-600 px-6 py-3 rounded-xl font-bold border border-red-100 dark:bg-red-950/20 dark:border-red-900 shadow-sm animate-in slide-in-from-right-4 duration-300",onClick$:y},p((o,g)=>o.value?"Eliminazione...":`Elimina ${g.value.length} selezionati`,[a,n]),3,"7i_0"),e("a",null,{href:"/gestione/dizionario/new",class:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-emerald-500/20 hover:scale-105 transition-transform flex items-center gap-2"},[e("span",null,null,"âž•",3,null),e("span",null,null,"Nuovo Termine",3,null)],3,null)],1,null)],1,null),e("div",null,{class:"bg-white dark:bg-gray-900 rounded-3xl border border-gray-100 dark:border-gray-800 shadow-sm overflow-hidden"},[e("div",null,{class:"p-6 border-b border-gray-100 dark:border-gray-800"},e("div",null,{class:"relative max-w-md"},[e("span",null,{class:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"},"ðŸ”",3,null),e("input",null,{type:"text",placeholder:"Cerca termine o kanji...",class:"w-full pl-12 pr-6 py-3 rounded-xl bg-gray-50 dark:bg-gray-800 border-none focus:ring-2 focus:ring-emerald-500 outline-none text-gray-900 dark:text-white font-medium",onInput$:i(()=>s(()=>Promise.resolve().then(()=>$),void 0),"s_XNa2IuqxNvs",[t])},null,3,null)],3,null),3,null),e("div",null,{class:"overflow-x-auto"},r.value?e("div",null,{class:"p-20 flex justify-center"},e("div",null,{class:"animate-spin h-8 w-8 border-4 border-emerald-600 border-t-transparent rounded-full"},null,3,null),3,"7i_1"):e("table",null,{class:"w-full text-left border-collapse"},[e("thead",null,null,e("tr",null,{class:"bg-gray-50 dark:bg-gray-800/50"},[e("th",null,{class:"px-6 py-4 w-10"},e("input",null,{type:"checkbox",checked:p((o,g)=>o.value.length>0&&g.value.length===o.value.length,[l,n]),class:"w-5 h-5 rounded-lg accent-emerald-600 cursor-pointer",onClick$:f},null,3,null),3,null),e("th",null,{class:"px-6 py-4 text-xs font-black text-gray-400 uppercase tracking-widest"},"Termine",3,null),e("th",null,{class:"px-6 py-4 text-xs font-black text-gray-400 uppercase tracking-widest"},"Kanji",3,null),e("th",null,{class:"px-6 py-4 text-xs font-black text-gray-400 uppercase tracking-widest"},"Pronuncia",3,null),e("th",null,{class:"px-6 py-4 text-xs font-black text-gray-400 uppercase tracking-widest"},"Audio",3,null),e("th",null,{class:"px-3 md:px-6 py-4 text-[10px] md:text-xs font-black text-gray-400 uppercase tracking-widest text-right"},"Azioni",3,null)],3,null),3,null),e("tbody",null,{class:"divide-y divide-gray-50 dark:divide-gray-800"},l.value.length===0?e("tr",null,null,e("td",null,{colSpan:6,class:"px-6 py-20 text-center text-gray-500 dark:text-gray-400 font-bold"},"Nessun termine trovato.",3,null),3,"7i_2"):l.value.map(o=>e("tr",{class:`group hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors ${n.value.includes(o.id)?"bg-emerald-50/30 dark:bg-emerald-900/10":""}`},null,[e("td",null,{class:"px-6 py-4"},e("input",{checked:n.value.includes(o.id),onClick$:i(()=>s(()=>Promise.resolve().then(()=>E),void 0),"s_LFoy6tfHJLg",[o,b])},{type:"checkbox",class:"w-5 h-5 rounded-lg accent-emerald-600 cursor-pointer"},null,2,null),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap font-black text-gray-900 dark:text-white uppercase tracking-wider"},v(o,"term"),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap font-serif text-xl text-emerald-600 dark:text-emerald-400"},v(o,"kanji"),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 font-medium italic"},v(o,"pronunciation"),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap"},o.audio?e("span",null,{class:"text-xl",title:"Audio presente"},"ðŸ”Š",3,"7i_3"):e("span",null,{class:"text-xl opacity-20",title:"Senza audio"},"ðŸ”‡",3,null),1,null),e("td",null,{class:"px-3 md:px-6 py-4 whitespace-nowrap text-right"},e("div",null,{class:"flex justify-end gap-2 opacity-20 group-hover:opacity-100 transition-opacity"},[e("a",{href:`/gestione/dizionario/${o.id}`},{class:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/10 rounded-xl transition-colors",title:"Modifica"},e("span",null,{class:"text-lg md:text-xl"},"âœï¸",3,null),3,null),e("button",{onClick$:i(()=>s(()=>Promise.resolve().then(()=>R),void 0),"s_M3YOKcpE0vE",[m,o])},{class:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-xl transition-colors",title:"Elimina"},e("span",null,{class:"text-lg md:text-xl"},"ðŸ—‘ï¸",3,null),2,null)],1,null),1,null)],1,o.id)),1,null)],1,null),1,null),e("div",null,{class:"p-6 bg-gray-50 dark:bg-gray-800/30 border-t border-gray-100 dark:border-gray-800 text-[10px] font-black text-gray-400 uppercase tracking-widest"},[p(o=>o.value.length,[l])," record trovati â€¢ ",p(o=>o.value.length,[n])," selezionati"],3,null)],1,null)],1,"7i_4")},q=Object.freeze(Object.defineProperty({__proto__:null,s_OzWG6SAdgzM:T},Symbol.toStringTag,{value:"Module"})),O=()=>{const[t,l]=u();return l(t.id)},E=Object.freeze(Object.defineProperty({__proto__:null,s_LFoy6tfHJLg:O},Symbol.toStringTag,{value:"Module"})),P=async()=>{const[t,l,r]=u();if(confirm(`Sei sicuro di voler eliminare ${r.value.length} termini selezionati?`)){l.value=!0;try{for(const n of r.value)await x.collection("dizionario").delete(n);t.value=t.value.filter(n=>!r.value.includes(n.id)),r.value=[]}catch(n){alert("Errore durante l'eliminazione di massa: "+n.message)}finally{l.value=!1}}},j=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_muWTzkVkwLo:P},Symbol.toStringTag,{value:"Module"})),L=t=>{const[l]=u();l.value.includes(t)?l.value=l.value.filter(r=>r!==t):l.value=[...l.value,t]},I=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_Nk1PH3k62N0:L},Symbol.toStringTag,{value:"Module"})),D=({track:t})=>{const[l,r,n]=u();t(()=>r.value),n.value=[],l()},A=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_ijEZ6p5Xhd8:D},Symbol.toStringTag,{value:"Module"})),N=()=>{const[t,l]=u();l.value.length===t.value.length?l.value=[]:l.value=t.value.map(r=>r.id)},V=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_ZSWXfOC0ie0:N},Symbol.toStringTag,{value:"Module"})),M=()=>{const[t,l]=u();return t(l.id,l.term)},R=Object.freeze(Object.defineProperty({__proto__:null,s_M3YOKcpE0vE:M},Symbol.toStringTag,{value:"Module"})),X=t=>{const[l]=u();return l.value=t.target.value},$=Object.freeze(Object.defineProperty({__proto__:null,s_XNa2IuqxNvs:X},Symbol.toStringTag,{value:"Module"}));export{c as _hW,q as i,k as s_0XVL0mw9yAk,O as s_LFoy6tfHJLg,M as s_M3YOKcpE0vE,z as s_N0Y8F8R0TxQ,L as s_Nk1PH3k62N0,T as s_OzWG6SAdgzM,X as s_XNa2IuqxNvs,N as s_ZSWXfOC0ie0,D as s_ijEZ6p5Xhd8,P as s_muWTzkVkwLo};
