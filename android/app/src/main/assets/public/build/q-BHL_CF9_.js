import{b as O,q as d,u as _,l as g,p as y,C as e,i as w,G as h,_hW as v}from"./q-GWx3MS6J.js";import{_ as u}from"./q-DoNi8vyY.js";import{u as E}from"./q-DZEaxapN.js";import{p as C}from"./q-D-1uqPQX.js";const P=[{name:"dizionario",label:"Dizionario",icon:"ðŸ“–",color:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",fields:["titolo","contenuto"]},{name:"tecniche",label:"Tecniche",icon:"ðŸ¥‹",color:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",fields:["titolo","contenuto","categoria_secondaria"]},{name:"domande_quiz",label:"Quiz",icon:"â“",color:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",fields:["domanda","spiegazione"]},{name:"kata",label:"Kata",icon:"å½¢",color:"bg-orange-100 dark:bg-orange-900/30 text-orange-600",fields:["titolo","contenuto","titolo_secondario"]},{name:"storia",label:"Storia",icon:"ðŸ“œ",color:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",fields:["titolo","contenuto"]},{name:"fijlkam",label:"FIJLKAM",icon:"ðŸ‡®ðŸ‡¹",color:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",fields:["titolo","contenuto"]},{name:"bacheca",label:"Bacheca",icon:"ðŸ“Œ",color:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300",fields:["titolo","contenuto"]},{name:"galleria",label:"Galleria",icon:"ðŸ“¸",color:"bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-300",fields:["titolo","contenuto"]}],T=l=>{const a=l.toLowerCase().trim(),o=new Set([a]),n=a.replace(/[\s-]/g,"");return n!==a&&n.length>1&&o.add(n),["o","ko","ju","uki"].forEach(r=>{if(n.startsWith(r)&&n.length>r.length){const s=n.slice(r.length);s.length>2&&(o.add(`${r} ${s}`),o.add(`${r}-${s}`))}}),["guruma","goshi","gari","nage","otoshi","gatame","waza","no"].forEach(r=>{if(n.endsWith(r)&&n!==r){const s=n.slice(0,-r.length);s.length>1&&(o.add(`${s} ${r}`),o.add(`${s}-${r}`))}}),Array.from(o)},te=O(d(()=>u(()=>Promise.resolve().then(()=>M),void 0),"s_4zQEiERWdVA")),S=({track:l})=>{const[a]=_();l(()=>a.isOpen);const o=n=>{n.key==="Escape"&&a.isOpen&&a.onClose()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},$=Object.freeze(Object.defineProperty({__proto__:null,_hW:v,s_9wQB6eNOdBY:S},Symbol.toStringTag,{value:"Module"})),R=({track:l})=>{const[a,o,n,i,p,r]=_();l(()=>n.isOpen),n.isOpen?setTimeout(()=>{var s;(s=o.value)==null||s.focus()},100):(p.value="",i.value=[],a.value=null,r.value="all")},z=Object.freeze(Object.defineProperty({__proto__:null,_hW:v,s_rQQ8eg0erkA:R},Symbol.toStringTag,{value:"Module"})),I=l=>{const a=E(),o=g(""),n=g([]),i=g(!1),p=g(null),r=g("all"),s=g(null),x=g();y(d(()=>u(()=>Promise.resolve().then(()=>G),void 0),"s_z76jPCxbdu4",[i,n,o,s])),y(d(()=>u(()=>Promise.resolve().then(()=>z),void 0),"s_rQQ8eg0erkA",[p,x,l,n,o,r])),y(d(()=>u(()=>Promise.resolve().then(()=>$),void 0),"s_9wQB6eNOdBY",[l]));const c=d(()=>u(()=>Promise.resolve().then(()=>X),void 0),"s_4DrX2PZ6vZ0"),m=d(()=>u(()=>Promise.resolve().then(()=>U),void 0),"s_sUVsPRcNjM0",[a,l]),f=r.value==="all"?n.value:n.value.filter(t=>t._collection===r.value);return l.isOpen?e("div",{onClick$:l.onClose},{class:"fixed inset-0 z-[100] flex items-center justify-center p-0 md:p-8 transition-all duration-500"},[e("div",null,{class:"absolute inset-0 bg-slate-950/80 backdrop-blur-2xl animate-in fade-in duration-500"},null,3,null),e("div",null,{class:"relative w-full max-w-4xl h-full md:h-auto max-h-screen md:max-h-[90vh] bg-white/95 dark:bg-slate-900/95 backdrop-blur-3xl md:rounded-[2.5rem] shadow-2xl border-x-0 md:border border-white/10 flex flex-col overflow-hidden animate-in fade-in md:zoom-in md:slide-in-from-bottom-12 duration-500",onClick$:d(()=>u(()=>import("./q-BLQa-lsH.js"),[]),"s_n09sZMGZ2Lk")},[e("div",null,{class:"p-8 md:p-10 shrink-0 relative bg-gradient-to-b from-red-500/5 to-transparent"},[e("div",null,{class:"flex items-center gap-4 md:gap-6 mb-6 md:mb-8"},[e("div",null,{class:"hidden md:flex w-14 h-14 bg-red-600 rounded-2xl items-center justify-center text-3xl shadow-lg shadow-red-500/30"},"ðŸ”",3,null),e("div",null,{class:"flex-1"},[e("h2",null,{class:"text-2xl md:text-3xl font-black text-gray-900 dark:text-white uppercase tracking-tighter leading-none"},["Ricerca ",e("span",null,{class:"text-red-600 md:inline"},"Globale",3,null)],3,null),e("p",null,{class:"hidden md:block text-[10px] font-black uppercase tracking-[0.3em] text-gray-400 mt-2"},"Esplora l'ecosistema JudoOK",3,null)],3,null),e("button",{onClick$:l.onClose},{class:"w-12 h-12 flex items-center justify-center bg-gray-100 dark:bg-white/5 hover:bg-red-500/10 dark:hover:bg-red-500/10 rounded-full text-gray-400 hover:text-red-500 transition-all active:scale-90"},e("svg",null,{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e("path",null,{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":3,d:"M6 18L18 6M6 6l12 12"},null,3,null),3,null),2,null)],1,null),e("div",null,{class:"relative group"},[e("input",{ref:x},{type:"text",placeholder:"Cerca termini, tecniche, storie...",value:w(t=>t.value,[o]),class:"w-full pl-8 pr-16 py-5 rounded-[1.5rem] bg-gray-50/50 dark:bg-white/5 border-2 border-transparent focus:border-red-500/50 focus:bg-white dark:focus:bg-slate-800 outline-none transition-all text-xl font-medium text-gray-900 dark:text-white placeholder-gray-400 shadow-inner",autoFocus:!0,onInput$:d(()=>u(()=>Promise.resolve().then(()=>Q),void 0),"s_IkPGwCZ0nXs",[o])},null,3,null),e("div",null,{class:"absolute right-6 top-1/2 -translate-y-1/2 flex items-center gap-3"},[i.value&&e("div",null,{class:"animate-spin rounded-full h-5 w-5 border-2 border-red-600 border-t-transparent"},null,3,"Jp_0"),e("span",null,{class:"text-2xl opacity-30 group-focus-within:opacity-100 transition-opacity"},"âœ¨",3,null)],1,null)],1,null),o.value.length>=2&&n.value.length>0&&e("div",null,{class:"mt-8 flex flex-wrap gap-2 animate-in fade-in slide-in-from-top-4 duration-500 delay-150"},[e("button",{class:`px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${r.value==="all"?"bg-red-600 text-white shadow-lg shadow-red-500/30":"bg-gray-100 dark:bg-white/5 text-gray-500 hover:bg-gray-200 dark:hover:bg-white/10"}`},{onClick$:d(()=>u(()=>Promise.resolve().then(()=>L),void 0),"s_dX2T069n1Wo",[r])},["ðŸŒ Tutti (",w(t=>t.value.length,[n]),")"],3,null),P.filter(t=>n.value.some(b=>b._collection===t.name)).map(t=>{const b=n.value.filter(j=>j._collection===t.name).length,k=r.value===t.name;return e("button",{class:`px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2 ${k?"bg-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-gray-100 dark:bg-white/5 text-gray-500 hover:bg-gray-200 dark:hover:bg-white/10"}`,onClick$:d(()=>u(()=>Promise.resolve().then(()=>Y),void 0),"s_5otCcFDXKYg",[t,r])},null,[e("span",null,null,h(t,"icon"),1,null),e("span",null,null,h(t,"label"),1,null),e("span",null,{class:"opacity-50"},["(",b,")"],1,null)],0,t.name)})],1,"Jp_1")],1,null),e("div",null,{class:"flex-1 overflow-y-auto p-8 md:p-10 space-y-6 min-h-[300px]"},[o.value.length<2&&e("div",null,{class:"h-full flex flex-col items-center justify-center opacity-40 py-20"},[e("div",null,{class:"text-[120px] mb-8 animate-float"},"ðŸ”Ž",3,null),e("h3",null,{class:"text-xl font-black uppercase tracking-[0.4em] text-gray-900 dark:text-white"},"Inizia a Digitare",3,null),e("p",null,{class:"text-sm font-medium text-gray-500 mt-4 max-w-xs text-center leading-relaxed"},"Esplora il database completo di JudoOK in tempo reale",3,null)],3,"Jp_2"),o.value.length>=2&&f.length===0&&!i.value&&e("div",null,{class:"text-center py-12 max-w-md mx-auto"},[e("div",null,{class:"mb-10 cursor-pointer group relative inline-block",onClick$:d(()=>u(()=>Promise.resolve().then(()=>J),void 0),"s_lcylcPYtd38",[o])},e("div",null,{class:"relative w-56 h-auto transition-all duration-700 group-hover:scale-110"},[e("img",null,{src:"/media/kano_non_sa.webp",alt:"Empty State",class:"w-full h-auto drop-shadow-2xl rounded-[2rem] grayscale contrast-125 opacity-40 group-hover:opacity-0 transition-opacity duration-500"},null,3,null),e("img",null,{src:"/media/kano_via.webp",alt:"Google Search",class:"absolute inset-0 w-full h-auto drop-shadow-2xl rounded-[2rem] opacity-0 scale-90 group-hover:opacity-100 group-hover:scale-100 transition-all duration-500"},null,3,null),e("div",null,{class:"absolute -bottom-6 left-1/2 -translate-x-1/2 w-full opacity-0 group-hover:opacity-100 translate-y-4 group-hover:translate-y-0 transition-all duration-500"},e("span",null,{class:"px-5 py-2 bg-red-600 text-white text-[10px] font-black uppercase tracking-widest rounded-full shadow-2xl shadow-red-500/40"},"Cerca su Google âœ¨",3,null),3,null)],3,null),3,null),e("p",null,{class:"text-xl font-black text-gray-900 dark:text-white uppercase tracking-tight"},"Nessun match locale",3,null),e("p",null,{class:"text-sm text-gray-500 dark:text-ice-gray mt-4 leading-relaxed font-medium"},['Non abbiamo trovato corrispondenze per "',w(t=>t.value,[o]),`" all'interno del portale.`],3,null)],3,"Jp_3"),e("div",null,{class:"grid grid-cols-1 gap-4"},f.map(t=>e("div",null,{class:"surface-elevated group"},e("div",{onClick$:d(()=>u(()=>Promise.resolve().then(()=>K),void 0),"s_YSCuwpvf4O4",[m,t])},{class:"p-6 cursor-pointer overflow-hidden relative"},[e("div",null,{class:"absolute top-0 right-0 w-32 h-32 bg-red-500/5 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-700"},null,3,null),e("div",null,{class:"flex items-start justify-between gap-4 relative z-10"},[e("div",null,{class:"flex-1"},[e("div",null,{class:"flex items-center gap-3 mb-4"},[e("span",null,{class:"px-3 py-1 bg-red-500/10 text-red-600 dark:text-red-400 rounded-full text-[9px] font-black uppercase tracking-widest border border-red-500/10 flex items-center gap-2"},[e("span",null,null,[h(t,"_collectionIcon")," ",h(t,"_collectionLabel")],1,null),t._collection==="tecniche"&&e("span",null,{class:"flex items-center gap-1 opacity-60"},[(t.audio||t.audio_file)&&e("span",null,null,"ðŸ”Š",3,"Jp_4"),(t.video_link||t.video_youtube)&&e("span",null,null,"ðŸŽ¥",3,"Jp_5")],1,"Jp_6")],1,null),t.kanji&&e("span",null,{class:"text-red-500/40 font-serif text-lg leading-none"},h(t,"kanji"),1,"Jp_7")],1,null),e("h3",null,{class:"text-2xl font-black text-gray-900 dark:text-white uppercase tracking-tight leading-tight group-hover:text-red-600 transition-colors"},c(t),1,null),t.contenuto&&e("div",{dangerouslySetInnerHTML:t.contenuto.replace(/<[^>]*>?/gm," ")},{class:"mt-4 text-sm text-gray-500 dark:text-ice-gray line-clamp-2 leading-relaxed"},null,3,"Jp_8")],1,null),e("div",null,{class:"w-12 h-12 bg-gray-50 dark:bg-white/5 rounded-xl flex items-center justify-center text-red-500 group-hover:bg-red-600 group-hover:text-white transition-all shadow-sm"},e("svg",null,{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e("path",null,{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":3,d:"M14 5l7 7m0 0l-7 7m7-7H3"},null,3,null),3,null),3,null)],1,null)],0,null),1,`${t._collection}-${t.id}`)),1,null)],1,null),e("div",null,{class:"hidden md:block p-6 border-t border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/5 shrink-0"},e("div",null,{class:"max-w-4xl mx-auto flex items-center justify-between"},[e("div",null,{class:"flex items-center gap-8"},[e("div",null,{class:"flex items-center gap-2"},[e("kbd",null,{class:"bg-gray-200 dark:bg-white/10 px-2 py-1 rounded-md text-[9px] font-black"},"ESC",3,null),e("span",null,{class:"text-[9px] font-black uppercase tracking-[0.2em] text-gray-400"},"Chiudi",3,null)],3,null),e("div",null,{class:"flex items-center gap-2"},[e("kbd",null,{class:"bg-gray-200 dark:bg-white/10 px-2 py-1 rounded-md text-[9px] font-black"},"ENTER",3,null),e("span",null,{class:"text-[9px] font-black uppercase tracking-[0.2em] text-gray-400"},"Seleziona",3,null)],3,null)],3,null),e("div",null,{class:"text-[10px] font-black uppercase tracking-[0.3em] text-red-600/50"},"Judook Intelligence",3,null)],3,null),3,null)],1,null)],0,"Jp_9"):null},M=Object.freeze(Object.defineProperty({__proto__:null,s_4zQEiERWdVA:I},Symbol.toStringTag,{value:"Module"})),A=()=>{const[l]=_();return l.value="all"},L=Object.freeze(Object.defineProperty({__proto__:null,s_dX2T069n1Wo:A},Symbol.toStringTag,{value:"Module"})),V=l=>{const[a]=_();return a.value=l.target.value},Q=Object.freeze(Object.defineProperty({__proto__:null,s_IkPGwCZ0nXs:V},Symbol.toStringTag,{value:"Module"})),D=()=>{const[l]=_();window.open(`https://www.google.com/search?q=${encodeURIComponent(l.value+" judo")}`,"_blank")},J=Object.freeze(Object.defineProperty({__proto__:null,s_lcylcPYtd38:D},Symbol.toStringTag,{value:"Module"})),ne=l=>{const[a]=_();a.value=a.value===l?null:l},N=()=>{const[l,a]=_();return a.value=l.name},Y=Object.freeze(Object.defineProperty({__proto__:null,s_5otCcFDXKYg:N},Symbol.toStringTag,{value:"Module"})),F=l=>l.domanda?l.domanda.substring(0,60)+"...":l.titolo?l.titolo:"Risultato",X=Object.freeze(Object.defineProperty({__proto__:null,_hW:v,s_4DrX2PZ6vZ0:F},Symbol.toStringTag,{value:"Module"})),Z=l=>{const[a,o]=_(),i={dizionario:`/dizionario?search=${encodeURIComponent(l.titolo||"")}&id=${l.id}`,tecniche:`/tecniche?search=${encodeURIComponent(l.titolo||"")}&id=${l.id}`,domande_quiz:"/quiz",storia:`/storia?search=${encodeURIComponent(l.titolo||"")}&id=${l.id}`,kata:`/kata?search=${encodeURIComponent(l.titolo||"")}&id=${l.id}`,fijlkam:`/fijlkam?id=${l.id}`,bacheca:`/bacheca?search=${encodeURIComponent(l.titolo||"")}&id=${l.id}`,galleria:`/gallery?search=${encodeURIComponent(l.titolo||"")}&id=${l.id}`}[l._collection]||"/";o.onClose(),a(i)},U=Object.freeze(Object.defineProperty({__proto__:null,_hW:v,s_sUVsPRcNjM0:Z},Symbol.toStringTag,{value:"Module"})),B=({track:l})=>{const[a,o,n,i]=_();if(l(()=>n.value),i.value&&clearTimeout(i.value),n.value.length<2){o.value=[];return}i.value=window.setTimeout(async()=>{a.value=!0;const p=[],r=T(n.value);try{const s=P.map(async c=>{try{const m=c.fields.map(t=>`(${r.map(k=>`${t} ~ "${k}"`).join(" || ")})`).join(" || ");return(await C.collection(c.name).getList(1,10,{filter:m,requestKey:`search-${c.name}`})).items.map(t=>({...t,_collection:c.name,_collectionLabel:c.label,_collectionIcon:c.icon,_collectionColor:c.color}))}catch(m){return m.isAbort?[]:(console.error(`Error searching in ${c.name}:`,m),[])}});(await Promise.all(s)).forEach(c=>p.push(...c)),o.value=p}catch(s){console.error("Search error:",s)}finally{a.value=!1}},300)},G=Object.freeze(Object.defineProperty({__proto__:null,_hW:v,s_z76jPCxbdu4:B},Symbol.toStringTag,{value:"Module"})),W=()=>{const[l,a]=_();return l(a)},K=Object.freeze(Object.defineProperty({__proto__:null,s_YSCuwpvf4O4:W},Symbol.toStringTag,{value:"Module"}));export{te as S,v as _hW,F as s_4DrX2PZ6vZ0,I as s_4zQEiERWdVA,N as s_5otCcFDXKYg,S as s_9wQB6eNOdBY,V as s_IkPGwCZ0nXs,W as s_YSCuwpvf4O4,A as s_dX2T069n1Wo,D as s_lcylcPYtd38,R as s_rQQ8eg0erkA,Z as s_sUVsPRcNjM0,ne as s_y0Q9CRJ0TYE,B as s_z76jPCxbdu4};
