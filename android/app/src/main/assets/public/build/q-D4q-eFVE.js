import{u as i,l as p,p as m,q as r,C as e,k,i as d,j as v,G as w,_hW as c}from"./q-GWx3MS6J.js";import{p as b}from"./q-CpnnSTOF.js";import{_ as s}from"./q-DoNi8vyY.js";import{L as E}from"./q-DZEaxapN.js";const O=async t=>{const[l,o]=i();if(confirm("Sei sicuro di voler eliminare questo Kata?"))try{await b.collection("kata").delete(t),l.value=l.value.filter(n=>n.id!==t),o.value=o.value.filter(n=>n!==t)}catch{alert("Errore durante l'eliminazione")}},j=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_AYYjOmXN4wA:O},Symbol.toStringTag,{value:"Module"})),S=async({track:t})=>{const[l,o,n]=i();t(()=>o.value),n.value=[],l()},P=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_s8Eh0in3nAI:S},Symbol.toStringTag,{value:"Module"})),A=()=>{const[t,l]=i();return t(l.id)},T=Object.freeze(Object.defineProperty({__proto__:null,s_8QSsYeYY2zI:A},Symbol.toStringTag,{value:"Module"})),I=async()=>{const[t,l,o]=i();t.value=!0;try{const n=o.value?`titolo ~ "${o.value}" || titolo_secondario ~ "${o.value}"`:"",_=await b.collection("kata").getFullList({sort:"ordine,titolo",filter:n||void 0,requestKey:null});l.value=_.map(u=>({id:u.id,name:u.titolo,japanese_name:u.titolo_secondario,level:u.livello?`${u.livello}Â° Dan`:"-"}))}catch(n){console.error("[Admin Kata] Error:",n),l.value=[]}finally{t.value=!1}},L=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_PDsnFOntVEg:I},Symbol.toStringTag,{value:"Module"})),z=t=>{const[l]=i();l.value.includes(t)?l.value=l.value.filter(o=>o!==t):l.value=[...l.value,t]},D=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_gNACQ4URfE0:z},Symbol.toStringTag,{value:"Module"})),M=()=>{const[t,l]=i();l.value.length===t.value.length&&t.value.length>0?l.value=[]:l.value=t.value.map(o=>o.id)},C=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_nTbbGog0p1k:M},Symbol.toStringTag,{value:"Module"})),Y=()=>{const t=p(""),l=p([]),o=p(!0),n=p([]),_=p(!1);m(r(()=>s(()=>Promise.resolve().then(()=>P),void 0),"s_s8Eh0in3nAI",[r(()=>s(()=>Promise.resolve().then(()=>L),void 0),"s_PDsnFOntVEg",[o,l,t]),t,n]));const x=r(()=>s(()=>Promise.resolve().then(()=>j),void 0),"s_AYYjOmXN4wA",[l,n]),f=r(()=>s(()=>Promise.resolve().then(()=>U),void 0),"s_pNr8EnwHhds",[_,l,n]),y=r(()=>s(()=>Promise.resolve().then(()=>D),void 0),"s_gNACQ4URfE0",[n]),h=r(()=>s(()=>Promise.resolve().then(()=>C),void 0),"s_nTbbGog0p1k",[l,n]);return e("div",null,{class:"space-y-10 animate-in fade-in duration-700"},[e("header",null,{class:"flex flex-col md:flex-row md:items-center justify-between gap-6"},[e("div",null,null,[e("h2",null,{class:"text-3xl font-black text-gray-900 dark:text-white tracking-tight"},"Gestione Kata",3,null),e("p",null,{class:"text-gray-500 dark:text-gray-400 font-medium mt-1"},"Modifica le descrizioni e i video dei Kata.",3,null)],3,null),e("div",null,{class:"flex items-center gap-3"},[n.value.length>0&&e("button",null,{disabled:d(a=>a.value,[_]),class:"bg-red-50 text-red-600 px-6 py-3 rounded-xl font-bold border border-red-100 dark:bg-red-950/20 dark:border-red-900 shadow-sm animate-in slide-in-from-right-4 duration-300",onClick$:f},d((a,g)=>a.value?"Eliminazione...":`Elimina ${g.value.length} selezionati`,[_,n]),3,"la_0"),k(E,{href:"/gestione/kata/new",class:"inline-flex items-center gap-2 px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-black rounded-2xl transition-all shadow-lg shadow-red-500/25 transform hover:-translate-y-1",children:[e("span",null,{class:"text-xl"},"âž•",3,null),"Nuovo Kata"],[v]:{href:v,class:v}},3,"la_1")],1,null)],1,null),e("div",null,{class:"bg-white dark:bg-gray-900 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden"},[e("div",null,{class:"p-6 border-b border-gray-100 dark:border-gray-800"},e("div",null,{class:"relative max-w-md"},[e("input",null,{type:"text",placeholder:"Cerca Kata...",value:d(a=>a.value,[t]),class:"w-full pl-12 pr-4 py-3 rounded-2xl bg-gray-50 dark:bg-gray-800 border-none focus:ring-2 focus:ring-red-500 outline-none transition-all dark:text-white font-bold",onInput$:r(()=>s(()=>Promise.resolve().then(()=>R),void 0),"s_HxO0AICfj6E",[t])},null,3,null),e("span",null,{class:"absolute left-4 top-1/2 -translate-y-1/2 text-xl"},"ðŸ”",3,null)],3,null),3,null),e("div",null,{class:"overflow-x-auto"},o.value?e("div",null,{class:"p-20 flex justify-center"},e("div",null,{class:"animate-spin h-8 w-8 border-4 border-red-600 border-t-transparent rounded-full"},null,3,null),3,"la_2"):e("table",null,{class:"w-full text-left border-collapse"},[e("thead",null,null,e("tr",null,{class:"bg-gray-50 dark:bg-gray-800/50"},[e("th",null,{class:"px-6 py-4 w-10 text-center"},e("input",null,{type:"checkbox",checked:d((a,g)=>a.value.length>0&&g.value.length===a.value.length,[l,n]),class:"w-5 h-5 rounded-lg accent-red-600 cursor-pointer",onClick$:h},null,3,null),3,null),e("th",null,{class:"px-6 py-4 text-xs font-black text-gray-400 uppercase tracking-widest"},"Nome",3,null),e("th",null,{class:"px-6 py-4 text-xs font-black text-gray-400 uppercase tracking-widest"},"Giapponese",3,null),e("th",null,{class:"px-6 py-4 text-xs font-black text-gray-400 uppercase tracking-widest"},"Livello",3,null),e("th",null,{class:"px-6 py-4 text-xs font-black text-gray-400 uppercase tracking-widest text-right"},"Azioni",3,null)],3,null),3,null),e("tbody",null,{class:"divide-y divide-gray-50 dark:divide-gray-800"},l.value.length===0?e("tr",null,null,e("td",null,{colSpan:5,class:"px-6 py-20 text-center text-gray-500 dark:text-gray-400 font-bold"},"Nessun Kata trovato.",3,null),3,"la_3"):l.value.map(a=>e("tr",{class:`group hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors ${n.value.includes(a.id)?"bg-red-50/20 dark:bg-red-900/10":""}`},null,[e("td",null,{class:"px-6 py-4 text-center"},e("input",{checked:n.value.includes(a.id),onClick$:r(()=>s(()=>Promise.resolve().then(()=>V),void 0),"s_UwbbmUxh6p0",[a,y])},{type:"checkbox",class:"w-5 h-5 rounded-lg accent-red-600 cursor-pointer"},null,2,null),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap font-bold text-gray-900 dark:text-white uppercase tracking-wide"},w(a,"name"),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap font-medium text-gray-500 dark:text-gray-400 italic"},a.japanese_name||"-",1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap"},e("span",null,{class:"px-3 py-1 bg-yellow-100 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400 rounded-full text-[10px] font-black uppercase tracking-widest"},a.level||"-",1,null),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-right"},e("div",null,{class:"flex justify-end gap-2 opacity-20 group-hover:opacity-100 transition-opacity"},[e("a",{href:`/gestione/kata/${a.id}`},{class:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/10 rounded-lg transition-colors",title:"Modifica"},"âœï¸",3,null),e("button",{onClick$:r(()=>s(()=>Promise.resolve().then(()=>T),void 0),"s_8QSsYeYY2zI",[x,a])},{class:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-lg transition-colors",title:"Elimina"},"ðŸ—‘ï¸",2,null)],1,null),1,null)],1,a.id)),1,null)],1,null),1,null),e("div",null,{class:"p-6 bg-gray-50 dark:bg-gray-800/30 border-t border-gray-100 dark:border-gray-800 text-[10px] font-black text-gray-400 uppercase tracking-widest"},[d(a=>a.value.length,[l])," Kata â€¢ ",d(a=>a.value.length,[n])," selezionati"],3,null)],1,null)],1,"la_4")},q=Object.freeze(Object.defineProperty({__proto__:null,s_s4jf88y8eXM:Y},Symbol.toStringTag,{value:"Module"})),K=()=>{const[t,l]=i();return l(t.id)},V=Object.freeze(Object.defineProperty({__proto__:null,s_UwbbmUxh6p0:K},Symbol.toStringTag,{value:"Module"})),N=t=>{const[l]=i();return l.value=t.target.value},R=Object.freeze(Object.defineProperty({__proto__:null,s_HxO0AICfj6E:N},Symbol.toStringTag,{value:"Module"})),$=async()=>{const[t,l,o]=i();if(confirm(`Sei sicuro di voler eliminare ${o.value.length} Kata selezionati?`)){t.value=!0;try{for(const n of o.value)await b.collection("kata").delete(n);l.value=l.value.filter(n=>!o.value.includes(n.id)),o.value=[]}catch(n){alert("Errore durante l'eliminazione di massa: "+n.message)}finally{t.value=!1}}},U=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_pNr8EnwHhds:$},Symbol.toStringTag,{value:"Module"}));export{c as _hW,q as i,A as s_8QSsYeYY2zI,O as s_AYYjOmXN4wA,N as s_HxO0AICfj6E,I as s_PDsnFOntVEg,K as s_UwbbmUxh6p0,z as s_gNACQ4URfE0,M as s_nTbbGog0p1k,$ as s_pNr8EnwHhds,Y as s_s4jf88y8eXM,S as s_s8Eh0in3nAI};
