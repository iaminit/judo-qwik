import{u as d,l as p,p as f,q as c,C as e,i as v,G as x,_hW as _}from"./q-GWx3MS6J.js";import{p as b}from"./q-CpnnSTOF.js";import{_ as u}from"./q-DoNi8vyY.js";const k=({track:t})=>{const[l,a,r]=d();t(()=>a.value),r.value=[],l()},w=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_WH3nCU0FBg0:k},Symbol.toStringTag,{value:"Module"})),S=async()=>{const[t,l,a]=d();t.value=!0;try{const r=l.value?`titolo ~ "${l.value}" || tags ~ "${l.value}"`:"",m=(await b.collection("tecniche").getFullList({sort:"tags,ordine,titolo",filter:r,requestKey:null})).map(s=>{let g="";const y=(n,i)=>i?i.startsWith("media/")?"/"+i:b.files.getUrl(n,i,{thumb:"100x120"}):"",h=n=>"/media/"+n.toLowerCase().trim().replace(/Å/g,"o").replace(/Å«/g,"u").replace(/Ä/g,"a").replace(/Ä«/g,"i").replace(/Ä“/g,"e").replace(/[\s/]+/g,"-").replace(/[^-a-z0-9]/g,"").replace(/--+/g,"-").replace(/^-+|-+$/g,"")+".webp";return s.immagine_principale?g=y(s,s.immagine_principale):g=h(s.titolo),{id:s.id,name:s.titolo,group:s.tags,order:s.ordine,previewUrl:g}});a.value=m}catch(r){console.error("[Admin] Error fetching techniques:",r)}finally{t.value=!1}},P=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_Gf74dqdXDg4:S},Symbol.toStringTag,{value:"Module"})),T=t=>{const[l]=d();l.value.includes(t)?l.value=l.value.filter(a=>a!==t):l.value=[...l.value,t]},E=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_vTwPSzPBLRY:T},Symbol.toStringTag,{value:"Module"})),O=()=>{const[t,l]=d();t.value.length===l.value.length?t.value=[]:t.value=l.value.map(a=>a.id)},z=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_VarS7sAk7mM:O},Symbol.toStringTag,{value:"Module"})),L=()=>{const t=p(""),l=p([]),a=p(!0),r=p([]),o=p(!1);f(c(()=>u(()=>Promise.resolve().then(()=>w),void 0),"s_WH3nCU0FBg0",[c(()=>u(()=>Promise.resolve().then(()=>P),void 0),"s_Gf74dqdXDg4",[a,t,l]),t,r]));const s=c(()=>u(()=>Promise.resolve().then(()=>A),void 0),"s_2Rfy5dm0Bn0",[r,l]),g=c(()=>u(()=>Promise.resolve().then(()=>Y),void 0),"s_po10oSefXqk",[o,r,l]),y=c(()=>u(()=>Promise.resolve().then(()=>E),void 0),"s_vTwPSzPBLRY",[r]),h=c(()=>u(()=>Promise.resolve().then(()=>z),void 0),"s_VarS7sAk7mM",[r,l]);return e("div",null,{class:"space-y-8 animate-in fade-in duration-700"},[e("div",null,{class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},[e("div",null,null,[e("h2",null,{class:"text-3xl font-black text-gray-900 dark:text-white tracking-tight"},"Gestione Tecniche",3,null),e("p",null,{class:"text-gray-500 dark:text-gray-400 font-medium mt-1"},"Gestisci il database delle tecniche di Judo.",3,null)],3,null),e("div",null,{class:"flex items-center gap-3"},[r.value.length>0&&e("button",null,{disabled:v(n=>n.value,[o]),class:"bg-red-50 text-red-600 px-6 py-3 rounded-xl font-bold border border-red-100 dark:bg-red-950/20 dark:border-red-900 shadow-sm",onClick$:g},v((n,i)=>n.value?"Eliminazione...":`Elimina ${i.value.length} selezionate`,[o,r]),3,"Zr_0"),e("a",null,{href:"/gestione/tecniche/new",class:"bg-red-600 text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-red-500/20 hover:scale-105 transition-transform flex items-center gap-2"},[e("span",null,null,"âž•",3,null),e("span",null,null,"Nuova Tecnica",3,null)],3,null)],1,null)],1,null),e("div",null,{class:"bg-white dark:bg-gray-900 rounded-3xl border border-gray-100 dark:border-gray-800 shadow-sm overflow-hidden"},[e("div",null,{class:"p-6 border-b border-gray-100 dark:border-gray-800"},e("div",null,{class:"relative max-w-md"},[e("span",null,{class:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"},"ðŸ”",3,null),e("input",null,{type:"text",placeholder:"Cerca tecnica o gruppo...",class:"w-full pl-12 pr-6 py-3 rounded-xl bg-gray-50 dark:bg-gray-800 border-none focus:ring-2 focus:ring-red-500 outline-none text-gray-900 dark:text-white font-medium",onInput$:c(()=>u(()=>Promise.resolve().then(()=>I),void 0),"s_s2PgYNgI4W8",[t])},null,3,null)],3,null),3,null),e("div",null,{class:"overflow-x-auto"},e("table",null,{class:"w-full text-left border-collapse"},[e("thead",null,null,e("tr",null,{class:"bg-gray-50 dark:bg-gray-800/50"},[e("th",null,{class:"px-6 py-4 w-10"},e("input",null,{type:"checkbox",checked:v((n,i)=>i.value.length>0&&n.value.length===i.value.length,[r,l]),class:"w-5 h-5 rounded-lg accent-red-600 cursor-pointer",onClick$:h},null,3,null),3,null),e("th",null,{class:"px-6 py-4 text-xs font-black text-gray-400 uppercase tracking-widest"},"Anteprima",3,null),e("th",null,{class:"px-6 py-4 text-xs font-black text-gray-400 uppercase tracking-widest"},"Nome",3,null),e("th",null,{class:"px-6 py-4 text-xs font-black text-gray-400 uppercase tracking-widest"},"Gruppo",3,null),e("th",null,{class:"px-6 py-4 text-xs font-black text-gray-400 uppercase tracking-widest"},"Ordine",3,null),e("th",null,{class:"px-3 md:px-6 py-4 text-[10px] md:text-xs font-black text-gray-400 uppercase tracking-widest text-right"},"Azioni",3,null)],3,null),3,null),e("tbody",null,{class:"divide-y divide-gray-50 dark:divide-gray-800"},a.value?[1,2,3,4,5].map(n=>e("tr",null,{class:"animate-pulse"},e("td",null,{colSpan:6,class:"px-6 py-8"},e("div",null,{class:"h-4 bg-gray-100 dark:bg-gray-800 rounded w-full"},null,3,null),3,null),3,n)):l.value.length===0?e("tr",null,null,e("td",null,{colSpan:6,class:"px-6 py-20 text-center text-gray-500 dark:text-gray-400 font-bold"},"Nessuna tecnica trovata.",3,null),3,"Zr_1"):l.value.map(n=>e("tr",{class:`group hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors ${r.value.includes(n.id)?"bg-red-50/30 dark:bg-red-900/10":""}`},null,[e("td",null,{class:"px-6 py-4"},e("input",{checked:r.value.includes(n.id),onClick$:c(()=>u(()=>Promise.resolve().then(()=>U),void 0),"s_UEyr7LcfzuY",[n,y])},{type:"checkbox",class:"w-5 h-5 rounded-lg accent-red-600 cursor-pointer"},null,2,null),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap"},e("div",null,{class:"w-16 h-16 rounded-xl bg-gray-100 dark:bg-gray-800 overflow-hidden border border-gray-200 dark:border-gray-700 flex items-center justify-center p-1"},n.previewUrl?e("img",{src:x(n,"previewUrl"),alt:x(n,"name")},{class:"max-w-full max-h-full object-contain",onError$:c(()=>u(()=>import("./q-FIuGXiqR.js"),[]),"s_05KUc0lYEUI")},null,3,"Zr_2"):e("span",null,{class:"text-2xl"},"ðŸ¥‹",3,null),1,null),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap font-bold text-gray-900 dark:text-white uppercase tracking-wide"},x(n,"name"),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap"},e("span",null,{class:"px-3 py-1 rounded-full bg-gray-100 dark:bg-gray-800 text-[10px] font-black text-gray-500 dark:text-gray-400 uppercase tracking-widest"},x(n,"group"),1,null),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-400"},["#",x(n,"order")],1,null),e("td",null,{class:"px-3 md:px-6 py-4 whitespace-nowrap text-right"},e("div",null,{class:"flex justify-end gap-1 md:gap-2 opacity-20 group-hover:opacity-100 transition-opacity"},[e("a",{href:`/gestione/tecniche/${n.id}`},{class:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/10 rounded-xl transition-colors",title:"Modifica"},e("span",null,{class:"text-lg md:text-xl"},"âœï¸",3,null),3,null),e("button",{onClick$:c(()=>u(()=>Promise.resolve().then(()=>V),void 0),"s_tzYP37kSoYM",[s,n])},{class:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-xl transition-colors",title:"Elimina"},e("span",null,{class:"text-lg md:text-xl"},"ðŸ—‘ï¸",3,null),2,null)],1,null),1,null)],1,n.id)),1,null)],1,null),1,null),e("div",null,{class:"p-6 bg-gray-50 dark:bg-gray-800/30 border-t border-gray-100 dark:border-gray-800 text-[10px] font-black text-gray-400 uppercase tracking-widest"},[v(n=>n.value.length,[l])," record trovati â€¢ ",v(n=>n.value.length,[r])," selezionati"],3,null)],1,null)],1,"Zr_3")},W=Object.freeze(Object.defineProperty({__proto__:null,s_56dkVhbbEms:L},Symbol.toStringTag,{value:"Module"})),j=t=>{const[l]=d();return l.value=t.target.value},I=Object.freeze(Object.defineProperty({__proto__:null,s_s2PgYNgI4W8:j},Symbol.toStringTag,{value:"Module"})),D=async(t,l)=>{const[a,r]=d();if(confirm(`Sei sicuro di voler eliminare la tecnica "${l}"?`))try{await b.collection("tecniche").delete(t),r.value=r.value.filter(o=>o.id!==t),a.value=a.value.filter(o=>o!==t)}catch(o){alert("Errore: "+o.message)}},A=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_2Rfy5dm0Bn0:D},Symbol.toStringTag,{value:"Module"})),M=()=>{const[t,l]=d();return t(l.id,l.name)},V=Object.freeze(Object.defineProperty({__proto__:null,s_tzYP37kSoYM:M},Symbol.toStringTag,{value:"Module"})),R=async()=>{const[t,l,a]=d();if(confirm(`Sei sicuro di voler eliminare ${l.value.length} tecniche selezionate?`)){t.value=!0;try{for(const r of l.value)await b.collection("tecniche").delete(r);a.value=a.value.filter(r=>!l.value.includes(r.id)),l.value=[]}catch(r){alert("Errore durante l'eliminazione di massa: "+r.message)}finally{t.value=!1}}},Y=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_po10oSefXqk:R},Symbol.toStringTag,{value:"Module"})),q=()=>{const[t,l]=d();return l(t.id)},U=Object.freeze(Object.defineProperty({__proto__:null,s_UEyr7LcfzuY:q},Symbol.toStringTag,{value:"Module"}));export{_ as _hW,W as i,D as s_2Rfy5dm0Bn0,L as s_56dkVhbbEms,S as s_Gf74dqdXDg4,q as s_UEyr7LcfzuY,O as s_VarS7sAk7mM,k as s_WH3nCU0FBg0,R as s_po10oSefXqk,j as s_s2PgYNgI4W8,M as s_tzYP37kSoYM,T as s_vTwPSzPBLRY};
