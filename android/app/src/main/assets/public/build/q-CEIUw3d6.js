import{u as x,l as f,r as S,a as O,p as I,q as d,J as A,C as e,i as r,k as z,j as P,_hW as w}from"./q-GWx3MS6J.js";import{p as E}from"./q-D-1uqPQX.js";import{_ as c}from"./q-DoNi8vyY.js";import{A as L}from"./q-BaMSMnu0.js";import{L as j}from"./q-DZEaxapN.js";const M=()=>{const[a,o,n,l,g,i,v]=x(),s=i.value[n.value],_=a[n.value];if(!_)return;const b=_===s.correctAnswer;if(b?(v.value++,o.value=0):o.value++,(b?0:o.value)>=3){g.value=!0,l.value="results";return}n.value<i.value.length-1?n.value++:l.value="results"},D=Object.freeze(Object.defineProperty({__proto__:null,_hW:w,s_DRioUt0l0Aw:M},Symbol.toStringTag,{value:"Module"})),T=()=>{const[a,o]=x();return o.value[a.value]||null},C=Object.freeze(Object.defineProperty({__proto__:null,s_HxWqo3VAFR4:T},Symbol.toStringTag,{value:"Module"})),R=async()=>{const[a,o,n,l,g,i,v,s]=x();try{const _=[];s.danLevel!=="musashi"&&s.danLevel!=="mifune"&&s.danLevel!=="kano"&&_.push(`livello_dan="${s.danLevel}"`),s.category!=="mista"&&s.category!=="generale"&&_.push(`categoria="${s.category}"`);const b=_.join(" && "),y=await E.collection("domande_quiz").getFullList({filter:b,sort:"@random",requestKey:null});if(y.length===0){alert("Nessuna domanda trovata per i criteri selezionati.");return}const h=y.sort(()=>.5-Math.random()),m=Math.min(parseInt(s.questionCount),h.length),p=h.slice(0,m).map(t=>({id:t.id,question:t.domanda,options:[t.opzione_a,t.opzione_b,t.opzione_c,t.opzione_d],correctAnswer:t.risposta_corretta,explanation:t.spiegazione,image_path:t.immagine,category:t.categoria,dan_level:t.livello_dan}));i.value=p,l.value="playing",n.value=0,Object.keys(a).forEach(t=>delete a[Number(t)]),v.value=0,o.value=0,g.value=!1}catch(_){console.error(_),alert("Errore nel caricamento del quiz. Verifica la connessione.")}},q=Object.freeze(Object.defineProperty({__proto__:null,_hW:w,s_jle093xTCUc:R},Symbol.toStringTag,{value:"Module"})),V=a=>{const[o]=x();o.questionCount=a.target.value},U=Object.freeze(Object.defineProperty({__proto__:null,s_YgpF1FSmOW0:V},Symbol.toStringTag,{value:"Module"})),H=()=>{const[a,o]=x();return a(o)},$=Object.freeze(Object.defineProperty({__proto__:null,s_5dtBMt1idZI:H},Symbol.toStringTag,{value:"Module"})),F=()=>{const[a,o,n]=x();if(a.value)return{text:"HANSOKU-MAKE",score:"Squalifica",color:"text-red-600",msg:"Preparazione insufficiente!"};const l=Math.round(n.value/o.value.length*100);return l===100?{text:"IPPON",color:"text-yellow-500",msg:"Prestazione perfetta!"}:l>=70?{text:"WAZA-ARI",color:"text-blue-600",msg:"Buona prestazione!"}:l>=50?{text:"YUKO",color:"text-green-600",msg:"Prestazione sufficiente"}:l>=30?{text:"SHIDO",color:"text-orange-500",msg:"Devi studiare di piÃ¹"}:{text:"HANSOKU-MAKE",color:"text-red-600",msg:"Preparazione insufficiente!"}},N=Object.freeze(Object.defineProperty({__proto__:null,s_JRcELxL2sJs:F},Symbol.toStringTag,{value:"Module"})),K=()=>{const[a]=x();a.sectionTitle="Quiz Esame",a.sectionIcon="ðŸ“"},Q=Object.freeze(Object.defineProperty({__proto__:null,_hW:w,s_DDC7008HYLA:K},Symbol.toStringTag,{value:"Module"})),W=()=>{const a=f("setup"),o=S({danLevel:"1",questionCount:"10",category:"mista"}),n=f([]),l=f(0),g=S({}),i=f(0),v=f(0),s=f(!1),_=O(L);I(d(()=>c(()=>Promise.resolve().then(()=>Q),void 0),"s_DDC7008HYLA",[_]));const b=d(()=>c(()=>Promise.resolve().then(()=>q),void 0),"s_jle093xTCUc",[g,v,l,a,s,n,i,o]),y=d(()=>c(()=>Promise.resolve().then(()=>X),void 0),"s_fMFPGMpAofU",[g,l]),h=d(()=>c(()=>Promise.resolve().then(()=>D),void 0),"s_DRioUt0l0Aw",[g,v,l,a,s,n,i]),m=A(d(()=>c(()=>Promise.resolve().then(()=>N),void 0),"s_JRcELxL2sJs",[s,n,i])),p=A(d(()=>c(()=>Promise.resolve().then(()=>C),void 0),"s_HxWqo3VAFR4",[l,n]));return e("div",null,{class:"max-w-3xl mx-auto px-4 py-8"},[a.value==="setup"&&e("div",null,{class:"bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8 border border-gray-100 dark:border-gray-700 animate-in fade-in zoom-in duration-300"},[e("div",null,{class:"text-center mb-10"},[e("img",null,{src:"/media/mifune_sorride.webp",alt:"Kyuzo Mifune",class:"w-40 h-auto object-contain mx-auto mb-4 drop-shadow-lg"},null,3,null),e("h1",null,{class:"text-3xl font-black bg-gradient-to-r from-red-600 to-orange-600 bg-clip-text text-transparent mb-2"},"Preparazione Esame",3,null),e("p",null,{class:"text-gray-500 dark:text-gray-400"},"Seleziona il tuo livello e mettiti alla prova",3,null)],3,null),e("div",null,{class:"space-y-6"},[e("div",null,null,[e("label",null,{class:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2 uppercase tracking-wide"},"Livello Dan",3,null),e("select",null,{value:r(t=>t.danLevel,[o]),class:"w-full p-4 rounded-xl bg-gray-50 dark:bg-gray-900 border-2 border-transparent focus:border-red-500 focus:bg-white dark:focus:bg-black transition-all font-bold text-lg outline-none",onChange$:d(()=>c(()=>Promise.resolve().then(()=>J),void 0),"s_WiycgITgf7Y",[o])},[e("option",null,{value:"1"},"1Â° Dan (Shodan)",3,null),e("option",null,{value:"2"},"2Â° Dan (Nidan)",3,null),e("option",null,{value:"3"},"3Â° Dan (Sandan)",3,null),e("option",null,{value:"4"},"4Â° Dan (Yodan)",3,null),e("option",null,{value:"5"},"5Â° Dan (Godan)",3,null),e("option",null,{value:"musashi"},"Miyamoto Musashi (Custom)",3,null),e("option",null,{value:"mifune"},"Kyuzo Mifune (Master)",3,null),e("option",null,{value:"kano"},"Jigoro Kano (Legend)",3,null)],3,null)],3,null),o.danLevel==="musashi"?e("div",null,null,[e("label",null,{class:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2 uppercase tracking-wide"},["Numero Domande:"," ",e("span",null,{class:"text-red-500 text-lg"},r(t=>t.questionCount,[o]),3,null)],3,null),e("input",null,{type:"range",min:"1",max:"100",value:r(t=>t.questionCount,[o]),class:"w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-red-600",onInput$:d(()=>c(()=>Promise.resolve().then(()=>U),void 0),"s_YgpF1FSmOW0",[o])},null,3,null)],3,"I6_0"):e("div",null,null,[e("label",null,{class:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2 uppercase tracking-wide"},"Numero Domande",3,null),e("div",null,{class:"w-full p-4 rounded-xl bg-gray-100 dark:bg-gray-700 font-bold text-gray-500 dark:text-gray-400 cursor-not-allowed"},[r(t=>t.questionCount,[o])," Domande"],3,null)],3,null),e("button",null,{class:"w-full py-5 rounded-2xl bg-gradient-to-r from-red-600 to-red-500 text-white font-black text-xl shadow-lg shadow-red-500/30 hover:scale-105 active:scale-95 transition-all duration-200 mt-4 flex items-center justify-center gap-3",onClick$:b},e("span",null,null,"ðŸš€ INIZIA QUIZ",3,null),3,null)],1,null)],1,"I6_1"),a.value==="playing"&&p.value&&e("div",null,{class:"animate-in slide-in-from-right duration-300"},[e("div",null,{class:"flex justify-between items-end mb-6"},[e("div",null,null,[e("span",null,{class:"text-xs font-bold text-gray-400 uppercase tracking-widest"},"Domanda",3,null),e("div",null,{class:"text-3xl font-black text-gray-800 dark:text-white leading-none"},[e("span",null,{class:"text-red-600"},r(t=>t.value+1,[l]),3,null),e("span",null,{class:"text-lg text-gray-300 mx-1"},"/",3,null),e("span",null,{class:"text-gray-400"},r(t=>t.value.length,[n]),3,null)],3,null)],3,null),e("div",null,{class:"text-right"},v.value>0&&e("div",null,{class:"text-xs font-bold text-red-500 animate-pulse"},[r(t=>t.value,[v])," errori consecutivi!"],3,"I6_2"),1,null)],1,null),e("div",null,{class:"h-2 w-full bg-gray-100 dark:bg-gray-700 rounded-full mb-8 overflow-hidden"},e("div",null,{class:"h-full bg-red-500 transition-all duration-500 ease-out",style:r((t,u)=>({width:`${(t.value+1)/u.value.length*100}%`}),[l,n])},null,3,null),3,null),e("div",null,{class:"bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-6 md:p-8 border border-gray-100 dark:border-gray-700 relative overflow-hidden"},[e("h2",null,{class:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white mb-8 leading-relaxed"},r(t=>t.value.question,[p]),3,null),p.value.image_path&&typeof p.value.image_path=="string"&&e("div",null,{class:"mb-6 rounded-xl overflow-hidden border border-gray-100 shadow-inner bg-gray-50 flex justify-center"},e("img",null,{src:r(t=>`/media/${t.value.image_path.split("/").pop()}`,[p]),alt:"Domanda",class:"max-h-64 object-contain",onError$:d(()=>c(()=>import("./q-CisPXW2z.js"),[]),"s_em5mfLtNj90")},null,3,null),3,"I6_3"),e("div",null,{class:"space-y-3"},p.value.options.map((t,u)=>{const k=g[l.value]===u+1;return e("button",{class:`w-full p-4 md:p-5 text-left rounded-xl border-2 transition-all duration-200 flex items-start gap-4 group ${k?"border-red-500 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 shadow-md transform scale-[1.01]":"border-transparent bg-gray-50 dark:bg-gray-900 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-750"}`,onClick$:d(()=>c(()=>Promise.resolve().then(()=>$),void 0),"s_5dtBMt1idZI",[y,u])},null,[e("div",{class:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shrink-0 transition-colors ${k?"bg-red-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500 group-hover:bg-gray-300"}`},null,["A","B","C","D"][u],1,null),e("span",null,{class:"font-medium text-lg pt-0.5"},t,1,null)],0,u)}),1,null)],1,null),e("div",null,{class:"mt-8 flex justify-end"},e("button",{class:`px-8 py-4 rounded-xl font-bold text-lg shadow-lg flex items-center gap-2 transition-all duration-300 ${g[l.value]?"bg-gray-900 dark:bg-white text-white dark:text-black hover:scale-105 hover:shadow-xl":"bg-gray-200 dark:bg-gray-800 text-gray-400 cursor-not-allowed"}`},{disabled:r((t,u)=>!t[u.value],[g,l]),onClick$:h},[r((t,u)=>t.value===u.value.length-1?"Termina":"Prossima",[l,n]),e("span",null,null,"â†’",3,null)],3,null),1,null)],1,"I6_4"),a.value==="results"&&e("div",null,{class:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8 border border-gray-100 dark:border-gray-700 text-center animate-in zoom-in-95 duration-500"},[e("div",null,{class:"inline-block p-4 rounded-full bg-gray-50 dark:bg-gray-900 mb-6 relative"},[e("span",null,{class:"text-6xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},r(t=>t.value.text==="IPPON"?"ðŸ†":t.value.text==="HANSOKU-MAKE"?"ðŸ›‘":"ðŸ¥‹",[m]),3,null),e("svg",null,{class:"w-32 h-32 transform -rotate-90"},[e("circle",null,{cx:"64",cy:"64",r:"60",stroke:"currentColor","stroke-width":"8",fill:"transparent",class:"text-gray-200 dark:text-gray-700"},null,3,null),e("circle",null,{cx:"64",cy:"64",r:"60",stroke:"currentColor","stroke-width":"8",fill:"transparent","stroke-dasharray":377,"stroke-dashoffset":r((t,u,k)=>377-377*(t.value?0:k.value)/u.value.length,[s,n,i]),class:r(t=>t.value.color,[m])},null,3,null)],3,null)],3,null),e("h2",null,{class:r(t=>`text-4xl md:text-5xl font-black mb-2 ${t.value.color}`,[m])},r(t=>t.value.text,[m]),3,null),e("p",null,{class:"text-xl text-gray-600 dark:text-gray-400 font-medium mb-8"},r(t=>t.value.msg,[m]),3,null),e("div",null,{class:"grid grid-cols-2 gap-4 max-w-sm mx-auto mb-10"},[e("div",null,{class:"bg-gray-50 dark:bg-gray-900 p-4 rounded-2xl"},[e("div",null,{class:"text-sm text-gray-500 uppercase tracking-wide font-bold mb-1"},"Punteggio",3,null),e("div",null,{class:"text-2xl font-black text-gray-900 dark:text-white"},[r(t=>t.value,[i]),e("span",null,{class:"text-gray-400 text-base"},["/",r(t=>t.value.length,[n])],3,null)],3,null)],3,null),e("div",null,{class:"bg-gray-50 dark:bg-gray-900 p-4 rounded-2xl"},[e("div",null,{class:"text-sm text-gray-500 uppercase tracking-wide font-bold mb-1"},"Precisione",3,null),e("div",null,{class:"text-2xl font-black text-gray-900 dark:text-white"},[Math.round(i.value/n.value.length*100),"%"],1,null)],1,null)],1,null),e("div",null,{class:"flex flex-col gap-3"},[e("button",null,{class:"w-full py-4 rounded-xl bg-gray-900 dark:bg-white text-white dark:text-black font-bold text-lg shadow-lg hover:transform hover:scale-105 transition-all",onClick$:d(()=>c(()=>Promise.resolve().then(()=>Z),void 0),"s_LUtaVs4X580",[a])},"ðŸ”„ Nuova Partita",3,null),z(j,{href:"/",class:"w-full py-4 rounded-xl bg-transparent border-2 border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 font-bold text-lg hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors text-center",children:"Torna alla Home",[P]:{href:P,class:P}},3,"I6_5")],1,null)],1,"I6_6")],1,"I6_7")},oe=Object.freeze(Object.defineProperty({__proto__:null,s_0V2b370JR7U:W},Symbol.toStringTag,{value:"Module"})),Y=a=>{const[o]=x(),n=a.target.value;let l="10";n==="2"&&(l="20"),n==="3"&&(l="30"),n==="4"&&(l="40"),n==="5"&&(l="50"),n==="mifune"&&(l="99"),n==="kano"&&(l="100"),n==="musashi"&&(l="50"),o.danLevel=n,o.questionCount=l},J=Object.freeze(Object.defineProperty({__proto__:null,s_WiycgITgf7Y:Y},Symbol.toStringTag,{value:"Module"})),B=()=>{const[a]=x();a.value="setup"},Z=Object.freeze(Object.defineProperty({__proto__:null,s_LUtaVs4X580:B},Symbol.toStringTag,{value:"Module"})),G=a=>{const[o,n]=x(),l=a+1;o[n.value]=l},X=Object.freeze(Object.defineProperty({__proto__:null,_hW:w,s_fMFPGMpAofU:G},Symbol.toStringTag,{value:"Module"}));export{w as _hW,oe as i,W as s_0V2b370JR7U,H as s_5dtBMt1idZI,K as s_DDC7008HYLA,M as s_DRioUt0l0Aw,T as s_HxWqo3VAFR4,F as s_JRcELxL2sJs,B as s_LUtaVs4X580,Y as s_WiycgITgf7Y,V as s_YgpF1FSmOW0,G as s_fMFPGMpAofU,R as s_jle093xTCUc};
