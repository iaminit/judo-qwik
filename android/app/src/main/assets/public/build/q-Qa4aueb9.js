import{u as d,l as g,p as T,q as s,C as e,i as b,k as p,j as _,G as k,F as A,_hW as f}from"./q-GWx3MS6J.js";import{p as x}from"./q-CpnnSTOF.js";import{_ as u}from"./q-DoNi8vyY.js";import{L as y}from"./q-DZEaxapN.js";const j=async({track:l})=>{const[t,r,a,n,i]=d();l(()=>t.value),a.value=!0,n.value=[];try{if(t.value==="articoli"){console.log("[Admin Storia] Fetching articles from storia...");const c=await x.collection("storia").getFullList({filter:'tags ~ "articolo" || anno = null',sort:"ordine,titolo",requestKey:null});console.log("[Admin Storia] âœ… Fetched history items:",c.length),r.value=c}else{console.log("[Admin Storia] Fetching timeline from storia...");const c=await x.collection("storia").getFullList({filter:"anno != null",sort:"anno,ordine",requestKey:null});console.log("[Admin Storia] âœ… Fetched timeline items:",c.length),i.value=c}}catch(c){console.error("[Admin Storia] ERROR:",c.message),t.value==="articoli"?r.value=[]:i.value=[]}finally{a.value=!1}},E=Object.freeze(Object.defineProperty({__proto__:null,_hW:f,s_q4JhnhgddAI:j},Symbol.toStringTag,{value:"Module"})),L=()=>{const[l]=d();return l.value="timeline"},P=Object.freeze(Object.defineProperty({__proto__:null,s_JEAolUuQRw4:L},Symbol.toStringTag,{value:"Module"})),I=()=>{const[l,t,r,a]=d(),n=l.value==="articoli"?t:a;r.value.length===n.value.length&&n.value.length>0?r.value=[]:r.value=n.value.map(i=>i.id)},D=Object.freeze(Object.defineProperty({__proto__:null,_hW:f,s_0gb1u55SQSQ:I},Symbol.toStringTag,{value:"Module"})),z=()=>{const[l]=d();return l.value="articoli"},R=Object.freeze(Object.defineProperty({__proto__:null,s_K7QJkADuvik:z},Symbol.toStringTag,{value:"Module"})),M=()=>{const[l,t]=d();return l(t.id)},N=Object.freeze(Object.defineProperty({__proto__:null,s_6rXkuRIZMEQ:M},Symbol.toStringTag,{value:"Module"})),Q=async l=>{const[t,r,a,n]=d();if(confirm("Sei sicuro di voler eliminare questo elemento?"))try{await x.collection("storia").delete(l),t.value==="articoli"?r.value=r.value.filter(i=>i.id!==l):n.value=n.value.filter(i=>i.id!==l),a.value=a.value.filter(i=>i!==l)}catch{alert("Errore durante l'eliminazione")}},C=Object.freeze(Object.defineProperty({__proto__:null,_hW:f,s_58B72fp910Y:Q},Symbol.toStringTag,{value:"Module"})),V=()=>{const l=g("articoli"),t=g([]),r=g([]),a=g(!0),n=g([]),i=g(!1);T(s(()=>u(()=>Promise.resolve().then(()=>E),void 0),"s_q4JhnhgddAI",[l,t,a,n,r]));const c=s(()=>u(()=>Promise.resolve().then(()=>C),void 0),"s_58B72fp910Y",[l,t,n,r]),w=s(()=>u(()=>Promise.resolve().then(()=>F),void 0),"s_16hFnWbwel0",[l,t,i,n,r]),S=s(()=>u(()=>Promise.resolve().then(()=>G),void 0),"s_OndpixAGaIs",[n]),O=s(()=>u(()=>Promise.resolve().then(()=>D),void 0),"s_0gb1u55SQSQ",[l,t,n,r]);return e("div",null,{class:"space-y-10 animate-in fade-in duration-700"},[e("header",null,{class:"flex flex-col md:flex-row md:items-center justify-between gap-6"},[e("div",null,null,[e("h2",null,{class:"text-3xl font-black text-gray-900 dark:text-white tracking-tight"},"Gestione Storia del Judo",3,null),e("p",null,{class:"text-gray-500 dark:text-gray-400 font-medium mt-1"},"Gestisci gli articoli storici e la cronologia mondiale del Judo.",3,null)],3,null),e("div",null,{class:"flex items-center gap-3"},[n.value.length>0&&e("button",null,{disabled:b(o=>o.value,[i]),class:"bg-red-50 text-red-600 px-6 py-3 rounded-xl font-bold border border-red-100 dark:bg-red-950/20 dark:border-red-900 shadow-sm animate-in slide-in-from-right-4 duration-300",onClick$:w},b((o,v)=>o.value?"Eliminazione...":`Elimina ${v.value.length} selezionati`,[i,n]),3,"Ny_0"),e("div",null,{class:"flex gap-2"},[l.value==="articoli"&&p(y,{href:"/gestione/storia/info/new",class:"px-6 py-3 bg-red-600 text-white font-black rounded-2xl shadow-lg shadow-red-500/25 transform hover:-translate-y-1 transition-all",children:"âž• Nuovo Articolo",[_]:{href:_,class:_}},3,"Ny_1"),l.value==="timeline"&&p(y,{href:"/gestione/storia/timeline/new",class:"px-6 py-3 bg-red-600 text-white font-black rounded-2xl shadow-lg shadow-red-500/25 transform hover:-translate-y-1 transition-all",children:"âž• Nuovo Evento",[_]:{href:_,class:_}},3,"Ny_2")],1,null)],1,null)],1,null),e("div",null,{class:"bg-white dark:bg-gray-900 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden"},[e("div",null,{class:"flex border-b border-gray-100 dark:border-gray-800"},[e("button",{class:`flex-1 py-4 text-xs font-black uppercase tracking-widest transition-all ${l.value==="articoli"?"text-red-600 border-b-2 border-red-600 bg-red-50/10":"text-gray-400 hover:text-gray-600"}`},{onClick$:s(()=>u(()=>Promise.resolve().then(()=>R),void 0),"s_K7QJkADuvik",[l])},"Articoli Storia",3,null),e("button",{class:`flex-1 py-4 text-xs font-black uppercase tracking-widest transition-all ${l.value==="timeline"?"text-red-600 border-b-2 border-red-600 bg-red-50/10":"text-gray-400 hover:text-gray-600"}`},{onClick$:s(()=>u(()=>Promise.resolve().then(()=>P),void 0),"s_JEAolUuQRw4",[l])},"Cronologia",3,null)],1,null),e("div",null,{class:"p-6"},[e("div",null,{class:"mb-6 flex items-center justify-between"},[e("button",null,{class:"text-[10px] font-black uppercase tracking-widest text-gray-400 hover:text-red-600 transition-colors flex items-center gap-2",onClick$:O},[e("input",null,{type:"checkbox",checked:b((o,v,m,h)=>(o.value==="articoli"?v.value:h.value).length>0&&m.value.length===(o.value==="articoli"?v.value:h.value).length,[l,t,n,r]),class:"w-4 h-4 rounded accent-red-600",readOnly:!0},null,3,null),b((o,v,m,h)=>m.value.length===(o.value==="articoli"?v.value:h.value).length?"Deseleziona Tutto":"Seleziona Tutto",[l,t,n,r])],3,null),e("span",null,{class:"text-[10px] font-black uppercase tracking-widest text-gray-400"},[b(o=>o.value.length,[n])," selezionati"],3,null)],3,null),a.value?e("div",null,{class:"py-10 text-center animate-pulse text-gray-400 font-bold uppercase tracking-widest text-xs"},"Caricamento...",3,"Ny_3"):p(A,{children:[l.value==="articoli"&&e("div",null,{class:"space-y-4"},t.value.length===0?e("div",null,{class:"py-10 text-center text-gray-500 font-bold"},"Nessun articolo trovato.",3,"Ny_4"):t.value.map(o=>e("div",{class:`group flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800/50 rounded-2xl border transition-all ${n.value.includes(o.id)?"border-red-500/50 bg-red-50/10":"border-gray-100 dark:border-gray-700/50"}`},null,[e("div",null,{class:"flex items-center gap-4"},[e("input",{checked:n.value.includes(o.id),onClick$:s(()=>u(()=>Promise.resolve().then(()=>B),void 0),"s_LjwNeTMk8dU",[o,S])},{type:"checkbox",class:"w-5 h-5 rounded-lg accent-red-600 cursor-pointer"},null,2,null),e("div",null,{class:"w-12 h-12 rounded-xl bg-white dark:bg-gray-900 overflow-hidden border border-gray-100 dark:border-gray-700 flex items-center justify-center"},o.immagine_principale?e("img",{src:x.files.getUrl(o,o.immagine_principale,{thumb:"50x50"})},{class:"w-full h-full object-cover",alt:""},null,3,"Ny_5"):e("span",null,{class:"text-xl"},"ðŸ“–",3,null),1,null),e("div",null,null,[e("p",null,{class:"text-sm font-black text-gray-900 dark:text-white uppercase tracking-tight"},k(o,"titolo"),1,null),e("p",null,{class:"text-[10px] font-bold text-red-500 uppercase mt-1"},o.titolo_secondario||"Storia",1,null)],1,null)],1,null),e("div",null,{class:"flex gap-2 opacity-20 group-hover:opacity-100 transition-opacity"},[p(y,{href:`/gestione/storia/info/${o.id}`,class:"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:"âœï¸",[_]:{class:_}},3,"Ny_6"),e("button",{onClick$:s(()=>u(()=>Promise.resolve().then(()=>N),void 0),"s_6rXkuRIZMEQ",[c,o])},{class:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors"},"ðŸ—‘ï¸",2,null)],1,null)],1,o.id)),1,"Ny_7"),l.value==="timeline"&&e("div",null,{class:"space-y-4"},r.value.length===0?e("div",null,{class:"py-10 text-center text-gray-500 font-bold"},"Nessun evento in timeline trovato.",3,"Ny_8"):r.value.map(o=>{var v;return e("div",{class:`group flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800/50 rounded-2xl border transition-all ${n.value.includes(o.id)?"border-red-500/50 bg-red-50/10":"border-gray-100 dark:border-gray-700/50"}`},null,[e("div",null,{class:"flex items-center gap-4"},[e("input",{checked:n.value.includes(o.id),onClick$:s(()=>u(()=>Promise.resolve().then(()=>W),void 0),"s_55rvOk1eb0I",[o,S])},{type:"checkbox",class:"w-5 h-5 rounded-lg accent-red-600 cursor-pointer"},null,2,null),e("div",null,null,[e("p",null,{class:"text-sm font-black text-gray-900 dark:text-white uppercase tracking-tight"},[e("span",null,{class:"text-red-600 mr-2"},k(o,"anno"),1,null)," ",k(o,"titolo")],1,null),e("p",null,{class:"text-[10px] text-gray-400 line-clamp-1 mt-1"},o.descrizione_breve||((v=o.contenuto)==null?void 0:v.substring(0,100)),1,null)],1,null)],1,null),e("div",null,{class:"flex gap-2 opacity-20 group-hover:opacity-100 transition-opacity"},[p(y,{href:`/gestione/storia/timeline/${o.id}`,class:"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:"âœï¸",[_]:{class:_}},3,"Ny_9"),e("button",{onClick$:s(()=>u(()=>Promise.resolve().then(()=>U),void 0),"s_HL9VwGYA6rQ",[c,o])},{class:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors"},"ðŸ—‘ï¸",2,null)],1,null)],1,o.id)}),1,"Ny_10")]},1,"Ny_11")],1,null)],1,null)],1,"Ny_12")},le=Object.freeze(Object.defineProperty({__proto__:null,s_60xfzDsrJ1Y:V},Symbol.toStringTag,{value:"Module"})),$=async()=>{const[l,t,r,a,n]=d();if(confirm(`Sei sicuro di voler eliminare ${a.value.length} elementi selezionati?`)){r.value=!0;try{for(const i of a.value)await x.collection("storia").delete(i);l.value==="articoli"?t.value=t.value.filter(i=>!a.value.includes(i.id)):n.value=n.value.filter(i=>!a.value.includes(i.id)),a.value=[]}catch(i){alert("Errore durante l'eliminazione di massa: "+i.message)}finally{r.value=!1}}},F=Object.freeze(Object.defineProperty({__proto__:null,_hW:f,s_16hFnWbwel0:$},Symbol.toStringTag,{value:"Module"})),J=l=>{const[t]=d();t.value.includes(l)?t.value=t.value.filter(r=>r!==l):t.value=[...t.value,l]},G=Object.freeze(Object.defineProperty({__proto__:null,_hW:f,s_OndpixAGaIs:J},Symbol.toStringTag,{value:"Module"})),q=()=>{const[l,t]=d();return l(t.id)},U=Object.freeze(Object.defineProperty({__proto__:null,s_HL9VwGYA6rQ:q},Symbol.toStringTag,{value:"Module"})),Y=()=>{const[l,t]=d();return t(l.id)},B=Object.freeze(Object.defineProperty({__proto__:null,s_LjwNeTMk8dU:Y},Symbol.toStringTag,{value:"Module"})),K=()=>{const[l,t]=d();return t(l.id)},W=Object.freeze(Object.defineProperty({__proto__:null,s_55rvOk1eb0I:K},Symbol.toStringTag,{value:"Module"}));export{f as _hW,le as i,I as s_0gb1u55SQSQ,$ as s_16hFnWbwel0,K as s_55rvOk1eb0I,Q as s_58B72fp910Y,V as s_60xfzDsrJ1Y,M as s_6rXkuRIZMEQ,q as s_HL9VwGYA6rQ,L as s_JEAolUuQRw4,z as s_K7QJkADuvik,Y as s_LjwNeTMk8dU,J as s_OndpixAGaIs,j as s_q4JhnhgddAI};
