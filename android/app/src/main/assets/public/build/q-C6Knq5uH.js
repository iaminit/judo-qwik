import{u as i,l as c,p as k,q as s,C as e,i as d,G as w,_hW as _}from"./q-GWx3MS6J.js";import{p as v}from"./q-BL5itR1-.js";import{p}from"./q-CpnnSTOF.js";import{_ as u}from"./q-DoNi8vyY.js";const E=async(l,t)=>{const[a,o]=i();if(confirm(`Sei sicuro di voler eliminare l'utente ${t}? L'azione Ã¨ irreversibile.`))try{await p.collection("users").delete(l),o.value=o.value.filter(r=>r.id!==l),a.value=a.value.filter(r=>r!==l)}catch(r){alert("Errore durante l'eliminazione: "+v(r))}},S=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_l9s4W20EIAA:E},Symbol.toStringTag,{value:"Module"})),P=async()=>{const[l,t,a,o]=i();t.value=!0;try{const r=await p.collection("users").getFullList({sort:"-created",filter:a.value?`name ~ "${a.value}" || email ~ "${a.value}"`:"",requestKey:null});o.value=r}catch(r){l.value=v(r)}finally{t.value=!1}},I=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_L0DdDRcC0wg:P},Symbol.toStringTag,{value:"Module"})),O=l=>{const[t]=i();return t.value=l.target.value},D=Object.freeze(Object.defineProperty({__proto__:null,s_KUpuvo80TxI:O},Symbol.toStringTag,{value:"Module"})),T=l=>{const[t]=i();t.value.includes(l)?t.value=t.value.filter(a=>a!==l):t.value=[...t.value,l]},j=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_Bfqm0FQdDxg:T},Symbol.toStringTag,{value:"Module"})),L=()=>{const[l,t]=i();return l(t.id)},A=Object.freeze(Object.defineProperty({__proto__:null,s_vxXI3Q5mqCE:L},Symbol.toStringTag,{value:"Module"})),C=()=>{const l=c([]),t=c(!0),a=c(null),o=c(""),r=c([]),m=c(!1);k(s(()=>u(()=>Promise.resolve().then(()=>K),void 0),"s_Rv0QM05L08Q",[s(()=>u(()=>Promise.resolve().then(()=>I),void 0),"s_L0DdDRcC0wg",[a,t,o,l]),o,r]));const x=s(()=>u(()=>Promise.resolve().then(()=>S),void 0),"s_l9s4W20EIAA",[r,l]),b=s(()=>u(()=>Promise.resolve().then(()=>Q),void 0),"s_O7SamEutCkc",[m,r,l]),y=s(()=>u(()=>Promise.resolve().then(()=>j),void 0),"s_Bfqm0FQdDxg",[r]),f=s(()=>u(()=>Promise.resolve().then(()=>V),void 0),"s_VK5jPQ4rQE0",[r,l]),h=n=>n.avatar?p.files.getUrl(n,n.avatar,{thumb:"100x100"}):`https://ui-avatars.com/api/?name=${encodeURIComponent(n.name||"U")}&background=random`;return e("div",null,{class:"space-y-10 animate-in fade-in duration-700"},[e("header",null,{class:"flex flex-col md:flex-row md:items-center justify-between gap-6"},[e("div",null,null,[e("h2",null,{class:"text-3xl font-black text-gray-900 dark:text-white tracking-tight"},"Gestione Membri",3,null),e("p",null,{class:"text-gray-500 dark:text-gray-400 font-medium mt-1"},"Anagrafica e controllo degli utenti registrati nel Dojo.",3,null)],3,null),e("div",null,{class:"flex items-center gap-4"},[r.value.length>0&&e("button",null,{disabled:d(n=>n.value,[m]),class:"bg-red-50 text-red-600 px-6 py-3 rounded-xl font-bold border border-red-100 dark:bg-red-950/20 dark:border-red-900 shadow-sm animate-in slide-in-from-right-4 duration-300",onClick$:b},d((n,g)=>n.value?"Eliminazione...":`Elimina ${g.value.length} selezionati`,[m,r]),3,"4X_0"),e("div",null,{class:"relative flex-shrink-0 w-full md:w-80"},[e("span",null,{class:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"},"ðŸ”",3,null),e("input",null,{type:"text",placeholder:"Cerca per nome o email...",class:"w-full pl-10 pr-4 py-3 rounded-2xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 focus:ring-4 focus:ring-red-500/10 focus:border-red-500 outline-none transition-all dark:text-white font-bold text-sm shadow-sm",onInput$:s(()=>u(()=>Promise.resolve().then(()=>D),void 0),"s_KUpuvo80TxI",[o])},null,3,null)],3,null)],1,null)],1,null),a.value&&e("div",null,{class:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 rounded-2xl text-red-600 dark:text-red-400 font-bold flex items-center gap-3"},[e("span",null,null,"âš ï¸",3,null)," ",d(n=>n.value,[a])],3,"4X_1"),e("div",null,{class:"bg-white dark:bg-gray-900 rounded-3xl border border-gray-100 dark:border-gray-800 overflow-hidden shadow-sm"},[e("div",null,{class:"overflow-x-auto"},e("table",null,{class:"w-full text-left border-collapse"},[e("thead",null,null,e("tr",null,{class:"bg-gray-50 dark:bg-gray-800/50 border-b border-gray-100 dark:border-gray-800"},[e("th",null,{class:"px-6 py-5 w-10 text-center"},e("input",null,{type:"checkbox",checked:d((n,g)=>g.value.length>0&&n.value.length===g.value.length,[r,l]),class:"w-5 h-5 rounded-lg accent-red-600 cursor-pointer",onClick$:f},null,3,null),3,null),e("th",null,{class:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-widest"},"Utente",3,null),e("th",null,{class:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-widest"},"Email",3,null),e("th",null,{class:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center"},"Stato",3,null),e("th",null,{class:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-widest"},"Iscritto il",3,null),e("th",null,{class:"px-6 py-5 text-[10px] font-black text-gray-400 uppercase tracking-widest text-right"},"Azioni",3,null)],3,null),3,null),e("tbody",null,{class:"divide-y divide-gray-50 dark:divide-gray-800"},t.value?[1,2,3,4,5].map(n=>e("tr",null,{class:"animate-pulse"},e("td",null,{colSpan:6,class:"px-6 py-8"},e("div",null,{class:"h-4 bg-gray-100 dark:bg-gray-800 rounded w-full"},null,3,null),3,null),3,n)):l.value.length===0?e("tr",null,null,e("td",null,{colSpan:6,class:"px-6 py-20 text-center"},e("p",null,{class:"text-gray-400 font-bold uppercase tracking-widest"},"Nessun membro trovato.",3,null),3,null),3,"4X_2"):l.value.map(n=>e("tr",{class:`group hover:bg-gray-50 dark:hover:bg-gray-800/30 transition-colors ${r.value.includes(n.id)?"bg-red-50/20 dark:bg-red-900/10":""}`},null,[e("td",null,{class:"px-6 py-4 text-center"},e("input",{checked:r.value.includes(n.id),onClick$:s(()=>u(()=>Promise.resolve().then(()=>A),void 0),"s_vxXI3Q5mqCE",[y,n])},{type:"checkbox",class:"w-5 h-5 rounded-lg accent-red-600 cursor-pointer"},null,2,null),1,null),e("td",null,{class:"px-6 py-4"},e("div",null,{class:"flex items-center gap-4"},[e("img",{src:h(n)},{class:"w-10 h-10 rounded-xl object-cover shadow-sm bg-gray-200"},null,3,null),e("span",null,{class:"font-black text-gray-900 dark:text-white uppercase tracking-tight"},n.name||"Senza Nome",1,null)],1,null),1,null),e("td",null,{class:"px-6 py-4"},e("span",null,{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},w(n,"email"),1,null),1,null),e("td",null,{class:"px-6 py-4 text-center"},e("span",{class:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest ${n.verified?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-400"}`},null,n.verified?"Verificato":"In attesa",1,null),1,null),e("td",null,{class:"px-6 py-4"},e("span",null,{class:"text-xs font-bold text-gray-400 uppercase"},new Date(n.created).toLocaleDateString("it-IT"),1,null),1,null),e("td",null,{class:"px-6 py-4 text-right"},e("div",null,{class:"flex justify-end gap-2 opacity-20 group-hover:opacity-100 transition-opacity"},e("button",{onClick$:s(()=>u(()=>Promise.resolve().then(()=>M),void 0),"s_684wCKPUZlc",[x,n])},{class:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all",title:"Elimina"},"ðŸ—‘ï¸",2,null),1,null),1,null)],1,n.id)),1,null)],1,null),1,null),e("div",null,{class:"p-6 bg-gray-50 dark:bg-gray-800/30 border-t border-gray-100 dark:border-gray-800 text-[10px] font-black text-gray-400 uppercase tracking-widest"},[d(n=>n.value.length,[l])," membri â€¢ ",d(n=>n.value.length,[r])," selezionati"],3,null)],1,null)],1,"4X_3")},Z=Object.freeze(Object.defineProperty({__proto__:null,s_fl7aem5k9D4:C},Symbol.toStringTag,{value:"Module"})),z=async()=>{const[l,t,a]=i();if(confirm(`Sei sicuro di voler eliminare ${t.value.length} utenti selezionati? L'azione Ã¨ IRREVERSIBILE.`)){l.value=!0;try{for(const o of t.value)await p.collection("users").delete(o);a.value=a.value.filter(o=>!t.value.includes(o.id)),t.value=[]}catch(o){alert("Errore durante l'eliminazione di massa: "+v(o))}finally{l.value=!1}}},Q=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_O7SamEutCkc:z},Symbol.toStringTag,{value:"Module"})),R=()=>{const[l,t]=i();l.value.length===t.value.length&&t.value.length>0?l.value=[]:l.value=t.value.map(a=>a.id)},V=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_VK5jPQ4rQE0:R},Symbol.toStringTag,{value:"Module"})),U=()=>{const[l,t]=i();return l(t.id,t.name||t.email)},M=Object.freeze(Object.defineProperty({__proto__:null,s_684wCKPUZlc:U},Symbol.toStringTag,{value:"Module"})),$=({track:l})=>{const[t,a,o]=i();l(()=>a.value),o.value=[],t()},K=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_Rv0QM05L08Q:$},Symbol.toStringTag,{value:"Module"}));export{_ as _hW,Z as i,U as s_684wCKPUZlc,T as s_Bfqm0FQdDxg,O as s_KUpuvo80TxI,P as s_L0DdDRcC0wg,z as s_O7SamEutCkc,$ as s_Rv0QM05L08Q,R as s_VK5jPQ4rQE0,C as s_fl7aem5k9D4,E as s_l9s4W20EIAA,L as s_vxXI3Q5mqCE};
