import{_ as p}from"./q-DoNi8vyY.js";import{R as k,p as v}from"./q-BL5itR1-.js";import{l as m,C as e,q as x,i as o,k as w,j as s,u as _,_hW as h}from"./q-GWx3MS6J.js";import{u as P}from"./q-DZEaxapN.js";import{p as f}from"./q-CpnnSTOF.js";const D=a=>{const n=P(),t=m(!1),i=m(null);return e("div",null,{class:"max-w-4xl mx-auto"},e("form",null,{class:"space-y-10 animate-in fade-in slide-in-from-bottom-4 duration-700",onSubmit$:x(()=>p(()=>Promise.resolve().then(()=>E),void 0),"s_KwP6zsPk0kk",[i,t,n,a])},[i.value&&e("div",null,{class:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 rounded-2xl text-red-600 dark:text-red-400 font-bold flex items-center gap-3"},[e("span",null,null,"⚠️",3,null),o(r=>r.value,[i])],3,"IR_0"),e("div",null,{class:"grid grid-cols-1 md:grid-cols-3 gap-8"},[e("div",null,{class:"space-y-2 md:col-span-2"},[e("label",null,{class:"block text-xs font-black text-gray-400 uppercase tracking-widest px-1"},"Titolo Sezione",3,null),e("input",null,{type:"text",name:"titolo",required:!0,value:o(r=>{var l;return(l=r.program)==null?void 0:l.titolo},[a]),placeholder:"es. Nage Waza",class:"w-full px-5 py-4 rounded-2xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all dark:text-white font-bold"},null,3,null)],3,null),e("div",null,{class:"space-y-2"},[e("label",null,{class:"block text-xs font-black text-gray-400 uppercase tracking-widest px-1"},"Sezione (Badge)",3,null),e("input",null,{type:"text",name:"categoria_secondaria",value:o(r=>{var l;return(l=r.program)==null?void 0:l.categoria_secondaria},[a]),placeholder:"es. Pratica",class:"w-full px-5 py-4 rounded-2xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all dark:text-white font-bold"},null,3,null)],3,null)],3,null),e("div",null,{class:"grid grid-cols-1 md:grid-cols-2 gap-8"},[e("div",null,{class:"space-y-2"},[e("label",null,{class:"block text-xs font-black text-gray-400 uppercase tracking-widest px-1"},"Livello Dan (1-6)",3,null),e("input",null,{type:"number",name:"livello",required:!0,min:1,max:6,value:o(r=>{var l;return((l=r.program)==null?void 0:l.livello)||1},[a]),class:"w-full px-5 py-4 rounded-2xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all dark:text-white font-bold"},null,3,null)],3,null),e("div",null,{class:"space-y-2"},[e("label",null,{class:"block text-xs font-black text-gray-400 uppercase tracking-widest px-1"},"Ordine Visualizzazione",3,null),e("input",null,{type:"number",name:"ordine",required:!0,value:o(r=>{var l;return((l=r.program)==null?void 0:l.ordine)||0},[a]),class:"w-full px-5 py-4 rounded-2xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all dark:text-white font-bold"},null,3,null)],3,null)],3,null),e("div",null,{class:"space-y-2"},[e("label",null,{class:"block text-xs font-black text-gray-400 uppercase tracking-widest px-1"},"Contenuto Programma",3,null),w(k,{name:"contenuto",id:"contenuto_programma",get value(){var r;return(r=a.program)==null?void 0:r.contenuto},placeholder:"Elenca le tecniche e i requisiti...",[s]:{name:s,id:s,value:o(r=>{var l;return(l=r.program)==null?void 0:l.contenuto},[a]),placeholder:s}},3,"IR_1")],1,null),e("div",null,{class:"pt-10 border-t border-gray-100 dark:border-gray-800 flex justify-end gap-4"},[e("button",null,{type:"button",class:"px-8 py-4 rounded-2xl font-bold text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all",onClick$:x(()=>p(()=>Promise.resolve().then(()=>j),void 0),"s_6bGlp85nujo",[n])},"Annulla",3,null),e("button",null,{type:"submit",disabled:o(r=>r.value,[t]),class:"px-10 py-4 rounded-2xl bg-gray-900 dark:bg-white text-white dark:text-black font-black text-lg shadow-xl shadow-black/10 hover:transform hover:-translate-y-1 transition-all disabled:opacity-50"},o((r,l)=>r.value?"Salvataggio...":l.isNew?"Crea Programma":"Salva Modifiche",[t,a]),3,null)],3,null)],1,null),1,"IR_2")},S=()=>{const[a]=_();return a("/gestione/programma")},j=Object.freeze(Object.defineProperty({__proto__:null,s_6bGlp85nujo:S},Symbol.toStringTag,{value:"Module"})),z=async a=>{const[n,t,i,u]=_();a.preventDefault(),t.value=!0,n.value=null;const r=a.target,l=new FormData(r),y=d=>(d||"untitled").toLowerCase().replace(/[àáâãäå]/g,"a").replace(/[èéêë]/g,"e").replace(/[ìíîï]/g,"i").replace(/[òóôõö]/g,"o").replace(/[ùúûü]/g,"u").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").substring(0,100),c=l.get("titolo"),g=l.get("livello"),b={titolo:c,categoria_secondaria:l.get("categoria_secondaria"),contenuto:l.get("contenuto"),livello:Number(g),ordine:Number(l.get("ordine")),slug:y(c+"-dan-"+g),tags:"esame_dan",pubblicato:!0};try{u.isNew?await f.collection("fijlkam").create(b):await f.collection("fijlkam").update(u.program.id,b),i("/gestione/programma")}catch(d){n.value=v(d),window.scrollTo({top:0,behavior:"smooth"})}finally{t.value=!1}},E=Object.freeze(Object.defineProperty({__proto__:null,_hW:h,s_KwP6zsPk0kk:z},Symbol.toStringTag,{value:"Module"}));export{h as _hW,D as s_0rcWh3iyyyw,S as s_6bGlp85nujo,z as s_KwP6zsPk0kk};
