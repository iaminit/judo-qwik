import{_ as b}from"./q-DoNi8vyY.js";import{l as p,p as v,q as g,C as e,i as c,u as _,_hW as f}from"./q-GWx3MS6J.js";import{p as m}from"./q-CpnnSTOF.js";import{p as y}from"./q-BL5itR1-.js";const D=()=>{var u,d;const l=p(null),r=p(!0),s=p(!1),a=p(null),o=p(!1);v(g(()=>b(()=>Promise.resolve().then(()=>S),void 0),"s_XTtN2IuopLc",[g(()=>b(()=>Promise.resolve().then(()=>h),void 0),"s_HcIoGxfAVT8",[a,r,l])]));const i=g(()=>b(()=>Promise.resolve().then(()=>T),void 0),"s_zYQ78v2Phes",[a,s,l,o]);return e("div",null,{class:"space-y-10 animate-in fade-in duration-700"},[e("header",null,null,[e("h2",null,{class:"text-3xl font-black text-gray-900 dark:text-white tracking-tight"},"Impostazioni Sistema",3,null),e("p",null,{class:"text-gray-500 dark:text-gray-400 font-medium mt-1"},"Configura i parametri globali del Dojo digitale.",3,null)],3,null),a.value&&e("div",null,{class:"p-6 bg-amber-50 dark:bg-amber-900/20 border border-amber-100 dark:border-amber-800 rounded-3xl text-amber-800 dark:text-amber-300"},[e("div",null,{class:"flex items-center gap-3 mb-2 font-black uppercase text-xs tracking-widest"},e("span",null,null,"⚠️ Attenzione",3,null),3,null),e("p",null,{class:"text-sm font-medium"},c(t=>t.value,[a]),3,null),!((u=l.value)!=null&&u.id)&&e("div",null,{class:"mt-4 pt-4 border-t border-amber-200 dark:border-amber-800/50"},[e("p",null,{class:"text-[10px] uppercase font-black opacity-60 mb-2"},"Schema Suggerito:",3,null),e("code",null,{class:"block p-3 bg-black/5 dark:bg-white/5 rounded-xl text-[10px] font-mono whitespace-pre"},["Collection: site_settings",`
`,"- site_name (text, non-empty)",`
`,"- site_description (text)",`
`,"- contact_email (email)",`
`,"- maintenance_mode (bool)"],3,null)],3,"Ad_0")],1,"Ad_1"),o.value&&e("div",null,{class:"p-4 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800 rounded-2xl text-emerald-600 dark:text-emerald-400 font-bold flex items-center gap-3 animate-in zoom-in duration-300"},[e("span",null,null,"✅",3,null)," Impostazioni salvate con successo!"],3,"Ad_2"),e("div",{class:`bg-white dark:bg-gray-900 rounded-3xl border border-gray-100 dark:border-gray-800 p-8 shadow-sm transition-opacity ${r.value?"opacity-50 pointer-events-none":""}`},null,e("form",null,{class:"space-y-8 max-w-2xl",onSubmit$:i},[e("div",null,{class:"space-y-6"},[e("div",null,{class:"space-y-2"},[e("label",null,{class:"block text-xs font-black text-gray-400 uppercase tracking-widest px-1"},"Nome del Sito",3,null),e("input",null,{type:"text",name:"site_name",required:!0,value:c(t=>{var n;return(n=t.value)==null?void 0:n.site_name},[l]),class:"w-full px-5 py-4 rounded-2xl bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 focus:ring-4 focus:ring-red-500/10 focus:border-red-500 outline-none transition-all dark:text-white font-bold"},null,3,null)],3,null),e("div",null,{class:"space-y-2"},[e("label",null,{class:"block text-xs font-black text-gray-400 uppercase tracking-widest px-1"},"Meta Description",3,null),e("textarea",null,{name:"site_description",rows:4,class:"w-full px-5 py-4 rounded-2xl bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 focus:ring-4 focus:ring-red-500/10 focus:border-red-500 outline-none transition-all dark:text-white font-medium"},(d=l.value)==null?void 0:d.site_description,1,null)],1,null),e("div",null,{class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[e("div",null,{class:"space-y-2"},[e("label",null,{class:"block text-xs font-black text-gray-400 uppercase tracking-widest px-1"},"Email di Contatto",3,null),e("input",null,{type:"email",name:"contact_email",value:c(t=>{var n;return(n=t.value)==null?void 0:n.contact_email},[l]),class:"w-full px-5 py-4 rounded-2xl bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 focus:ring-4 focus:ring-red-500/10 focus:border-red-500 outline-none transition-all dark:text-white font-bold"},null,3,null)],3,null),e("div",null,{class:"flex items-center gap-4 pt-6"},[e("label",null,{class:"relative inline-flex items-center cursor-pointer"},[e("input",null,{type:"checkbox",name:"maintenance_mode",checked:c(t=>{var n;return(n=t.value)==null?void 0:n.maintenance_mode},[l]),class:"sr-only peer"},null,3,null),e("div",null,{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-red-600"},null,3,null)],3,null),e("span",null,{class:"text-xs font-black text-gray-400 uppercase tracking-widest"},"Modalità Manutenzione",3,null)],3,null)],3,null)],1,null),e("div",null,{class:"pt-8 border-t border-gray-100 dark:border-gray-800"},e("button",null,{type:"submit",disabled:c((t,n)=>n.value||t.value,[r,s]),class:"px-10 py-4 bg-gray-900 dark:bg-white text-white dark:text-black font-black rounded-2xl shadow-xl shadow-black/10 hover:scale-105 active:scale-95 transition-all disabled:opacity-50"},c(t=>t.value?"Salvataggio...":"Salva Impostazioni",[s]),3,null),3,null)],1,null),1,null)],1,"Ad_3")},k=async()=>{const[l,r,s]=_();r.value=!0;try{const a=await m.collection("site_settings").getFullList({limit:1,requestKey:null});a.length>0?s.value=a[0]:s.value={site_name:"JudoOK",site_description:"Database premium delle tecniche di Judo",contact_email:"",maintenance_mode:!1}}catch(a){console.error("[Settings] Fetch failure:",a),l.value="Nota: La collezione `site_settings` non è stata ancora creata in PocketBase."}finally{r.value=!1}},h=Object.freeze(Object.defineProperty({__proto__:null,_hW:f,s_HcIoGxfAVT8:k},Symbol.toStringTag,{value:"Module"})),w=()=>{const[l]=_();l()},S=Object.freeze(Object.defineProperty({__proto__:null,_hW:f,s_XTtN2IuopLc:w},Symbol.toStringTag,{value:"Module"})),P=async l=>{var d;const[r,s,a,o]=_();l.preventDefault(),s.value=!0,r.value=null,o.value=!1;const x=l.target,i=new FormData(x),u={site_name:i.get("site_name"),site_description:i.get("site_description"),contact_email:i.get("contact_email"),maintenance_mode:i.get("maintenance_mode")==="on"};try{if((d=a.value)!=null&&d.id)await m.collection("site_settings").update(a.value.id,u);else{const t=await m.collection("site_settings").create(u);a.value=t}o.value=!0,setTimeout(()=>o.value=!1,3e3)}catch(t){r.value=y(t)}finally{s.value=!1}},T=Object.freeze(Object.defineProperty({__proto__:null,_hW:f,s_zYQ78v2Phes:P},Symbol.toStringTag,{value:"Module"}));export{f as _hW,D as s_0uMlvJ4RhDo,k as s_HcIoGxfAVT8,w as s_XTtN2IuopLc,P as s_zYQ78v2Phes};
